(this.webpackJsonplamisplus=this.webpackJsonplamisplus||[]).push([[0],{504:function(e,t,a){},746:function(e,t,a){},940:function(e,t,a){},942:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(36),i=a.n(r),o=(a(746),a(71)),s=a(6),l=a(26),d=a(7),j=a(13),b=a.n(j),u=a(16),O=a.n(u),p=a(691),h=a(626),f=a(1034),m=a(1035),x=a(1036),g=a(1037),y=a(1078),v=a(389),N=a(199),S=a(185),w=a(447),k=a(43),C=a(63),I=a.n(C),B=a(625),T=a(1029),R=a(1030),A=a(147),P=a.n(A),D=a(511),z=a.n(D),E=a(512),F=a.n(E),M=a(15),_=(a(170),a(191),a(58)),W=a(176),L=a(115),H=new URLSearchParams(window.location.search).get("jwt"),Y="/api/v1/",q=a(225),G=a.n(q),V=(a(624),a(31)),Q=a.n(V),U=a(1085),K=a(1091),X=a(2);N.b.add(S.a,S.b,S.c,S.d);var J=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{},Select:{height:45,width:300},button:{margin:e.spacing(1)},root:{marginBottom:20,flexGrow:1,"& .card-title":{color:"#fff",fontWeight:"bold"},"& .form-control":{borderRadius:"0.25rem",height:"41px"},"& .card-header:first-child":{borderRadius:"calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0"},"& .dropdown-toggle::after":{display:" block !important"},"& select":{"-webkit-appearance":"listbox !important"},"& p":{color:"red"},"& label":{fontSize:"14px",color:"#014d88",fontWeight:"bold"}},demo:{backgroundColor:e.palette.background.default},inline:{display:"inline"}}})),Z=k.c().shape({dateOfRegistration:k.a().required(),hospitalNumber:k.d().required(),firstName:k.d().required(),middleName:k.d().nullable(),lastName:k.d().required(),sex:k.b().required(),employmentStatus:k.b().required(),maritalStatus:k.b().required(),dob:k.a().required(),dateOfBirth:k.d().required(),age:k.b(),ninNumber:k.d().nullable(),pnumber:k.d().nullable(),altPhonenumber:k.d().nullable(),email:k.d().nullable(),address:k.d().nullable(),landmark:k.d().nullable(),countryId:k.b().required(),stateId:k.b().required(),district:k.b().nullable()}),$=function(e){var t,a=Object(L.d)({resolver:Object(w.a)(Z)}),r=a.register,i=a.watch,j=a.setValue,u=a.getValues,N=a.clearErrors,S=a.setError,k=a.handleSubmit,I=a.reset,B=a.formState,A=B.errors,D=(B.isSubmitting,i("pnumber",!1),i("altPhonenumber",!1),i("contactPhoneNumber",!1),i("age",!1),Object(c.useState)((new Date).toISOString().substr(0,10).replace("T"," "))),E=Object(d.a)(D,2),q=E[0],V=(E[1],Object(c.useState)(new Date("1/1/1930").toISOString().substr(0,10).replace("T"," "))),$=Object(d.a)(V,2),ee=$[0],te=($[1],Object(c.useState)((new Date).toISOString().substr(0,10).replace("T"," "))),ae=Object(d.a)(te,2),ce=ae[0],ne=ae[1],re=Object(c.useState)([]),ie=Object(d.a)(re,2),oe=ie[0],se=ie[1],le=Object(c.useState)(!1),de=Object(d.a)(le,2),je=de[0],be=(de[1],Object(c.useState)(!0)),ue=Object(d.a)(be,2),Oe=ue[0],pe=ue[1],he=Object(c.useState)(!1),fe=Object(d.a)(he,2),me=fe[0],xe=fe[1],ge=Object(c.useState)(null),ye=Object(d.a)(ge,2),ve=ye[0],Ne=ye[1],Se=Object(c.useState)(!1),we=Object(d.a)(Se,2),ke=(we[0],we[1],Object(c.useState)([])),Ce=Object(d.a)(ke,2),Ie=Ce[0],Be=Ce[1],Te=Object(c.useState)([]),Re=Object(d.a)(Te,2),Ae=Re[0],Pe=Re[1],De=Object(c.useState)([]),ze=Object(d.a)(De,2),Ee=ze[0],Fe=ze[1],Me=Object(c.useState)([]),_e=Object(d.a)(Me,2),We=_e[0],Le=_e[1],He=Object(c.useState)([]),Ye=Object(d.a)(He,2),qe=Ye[0],Ge=Ye[1],Ve=Object(c.useState)([]),Qe=Object(d.a)(Ve,2),Ue=Qe[0],Ke=Qe[1],Xe=Object(c.useState)([]),Je=Object(d.a)(Xe,2),Ze=Je[0],$e=Je[1],et=Object(c.useState)([]),tt=Object(d.a)(et,2),at=tt[0],ct=tt[1],nt=Object(c.useState)(!1),rt=Object(d.a)(nt,2),it=rt[0],ot=rt[1],st=Object(c.useState)(!1),lt=Object(d.a)(st,2),dt=lt[0],jt=lt[1],bt=e.location&&e.location.state?e.location.state.user:null,ut=Object(c.useState)(null),Ot=Object(d.a)(ut,2),pt=Ot[0],ht=Ot[1],ft=J(),mt=Object(o.g)(),xt=n.a.useState(!1),gt=Object(d.a)(xt,2),yt=gt[0],vt=gt[1],Nt=function(){return vt(!yt)},St=Object(o.h)().state;t=St?St.patientId:null;var wt=function(e){var t=qe.find((function(t){return t.id==e}));return t?t.display:""},kt=function(e){if(null!==e.value)return e?Ct(e).value:""},Ct=function(e){var t;return void 0!=e&&null!==typeof(null===e||void 0===e?void 0:e.value)&&"undefined"!==typeof(null===e||void 0===e?void 0:e.value)&&"0"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.charAt(0))&&(e.value=e.value.replace("0","234")),e},It=function(e){var t=new Date,a=(e.split("-"),new Date(e));return t.getFullYear()-a.getFullYear()},Bt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var a,c,n,r,i,o,s,l,d,u,h,f,m,x,g,y,v,N,S,w,k;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=65;break}return e.next=3,O.a.get("".concat(Y,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 3:return r=e.sent,e.next=6,O.a.get("".concat(Y,"application-codesets/v2/SEX"),{headers:{Authorization:"Bearer ".concat(H)}});case 6:if(i=e.sent,o=r.data,console.log(o),s=o.contact?o.contact:[],se(s.contact),l=o.identifier,d=o.address,u=null===o||void 0===o?void 0:o.contactPoint,h=l.identifier.find((function(e){return"HospitalNumber"==e.type})),f=Ct(null===u||void 0===u||null===(a=u.contactPoint)||void 0===a?void 0:a.find((function(e){return"phone"==e.type}))),m=null===u||void 0===u||null===(c=u.contactPoint)||void 0===c?void 0:c.find((function(e){return"email"==e.type})),x=Ct(null===u||void 0===u||null===(n=u.contactPoint)||void 0===n?void 0:n.find((function(e){return"altphone"==e.type}))),g=d&&d.address&&d.address.length>0?d.address[0]:null,o.gender,y=Q.a.find(i.data,{display:Q.a.upperFirst(Q.a.lowerCase(o.sex))}).id,v=o.employmentStatus,N=o.education,S=o.maritalStatus,ht(o.facilityId),j("dateOfRegistration",o.dateOfRegistration),j("facilityId",o.facilityId),j("ninNumber",o.ninNumber),j("firstName",o.firstName),j("middleName",o.otherName),j("lastName",o.surname),j("hospitalNumber",h?h.value:""),j("maritalStatus",S?S.id:""),j("employmentStatus",v?v.id:""),j("sex",y),j("highestQualification",N?N.id:""),j("dob",Object(p.a)(new Date(o.dateOfBirth),"yyyy-MM-dd")),j("age",It(o.dateOfBirth)),!g){e.next=62;break}if(j("countryId",g.countryId),!g.countryId){e.next=46;break}return e.next=43,_t(g.countryId);case 43:e.t0=e.sent,e.next=47;break;case 46:e.t0="";case 47:if(w=e.t0,$e(w),j("stateId",g.stateId),!g.stateId){e.next=56;break}return e.next=53,_t(g.stateId);case 53:e.t1=e.sent,e.next=57;break;case 56:e.t1="";case 57:k=e.t1,ct(k),j("district",g.district),j("address",g.city),j("landmark",g.line[0]);case 62:j("pnumber",f?f.value:"+234"),j("email",m?m.value:null),j("altPhonenumber",x?x.value:"+234");case 65:case"end":return e.stop()}}),e)}))),[]),Tt=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ot(!1),e.next=3,O.a.post("".concat(Y,"patient/exist/hospital-number"),t,{responseType:"text",headers:{Authorization:"Bearer ".concat(H),"Content-Type":"text/plain"}}).then((function(e){e.data?ot(!0):ot(!1)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jt(!1),!(t.target.value.length>0)){e.next=4;break}return e.next=4,O.a.post("".concat(Y,"patient/exist/nin-number/").concat(t.target.value),t.target.value,{responseType:"text",headers:{Authorization:"Bearer ".concat(H),"Content-Type":"text/plain"}}).then((function(e){e.data?jt(!0):jt(!1)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(){var e=Object(l.a)(b.a.mark((function e(a){var c,n,r,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("data",a),!Q.a.find(A,(function(e){return console.log("err",e)}))){e.next=5;break}M.b.error("Failed to save form kindly check the form for errors",{position:M.b.POSITION.TOP_RIGHT}),e.next=33;break;case 5:if(e.prev=5,c={active:!0,address:[{city:a.address,countryId:a.countryId,district:a.district,line:[a.landmark],organisationUnitId:0,postalCode:"",stateId:a.stateId}],contact:oe,contactPoint:[],dateOfBirth:new Date(a.dob),deceased:!1,deceasedDateTime:null,firstName:a.firstName,sexId:a.sex,identifier:[{assignerId:1,type:"HospitalNumber",value:a.hospitalNumber}],ninNumber:a.ninNumber,otherName:a.middleName,maritalStatusId:a.maritalStatus,surname:a.lastName,educationId:a.highestQualification,employmentStatusId:null!=a.employmentStatus?a.employmentStatus:null,dateOfRegistration:a.dateOfRegistration,isDateOfBirthEstimated:"Actual"!=a.dateOfBirth},a.pnumber&&(n={type:"phone",value:a.pnumber},c.contactPoint.push(n)),a.email&&(r={type:"email",value:a.email},c.contactPoint.push(r)),a.altPhonenumber&&(i={type:"altphone",value:a.altPhonenumber},c.contactPoint.push(i)),console.log("patient",c),I(),!t){e.next=20;break}return c.id=null,c.facilityId=pt,e.next=17,O.a.put("".concat(Y,"patient/").concat(t),c,{headers:{Authorization:"Bearer ".concat(H)}});case 17:e.sent,e.next=27;break;case 20:return e.next=22,O.a.post("".concat(Y,"patient"),c,{headers:{Authorization:"Bearer ".concat(H)}});case 22:200===(o=e.sent).status&&I(),M.b.success("Patient Register successful"),mt.push("/"),console.log(o);case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(5),console.log(e.t0),M.b.error("An error occured while registering a patient !",{position:M.b.POSITION.TOP_RIGHT});case 33:case"end":return e.stop()}}),e,null,[[5,29]])})));return function(t){return e.apply(this,arguments)}}(),Pt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/SEX"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:return t=e.sent,e.next=6,Be(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),M.b.error("An error occured while fetching sex codesets !",{position:M.b.POSITION.TOP_RIGHT});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Dt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/MARITAL_STATUS"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Pe(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching marital codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),zt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/EDUCATION"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Fe(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching education codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Et=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/OCCUPATION"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Le(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching occupation codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Ft=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/RELATIONSHIP"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Ge(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching relationship codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Mt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(Y,"organisation-units/parent-organisation-units/0"),{headers:{Authorization:"Bearer ".concat(H)}});case 2:t=e.sent,Ke(t.data);case 4:case"end":return e.stop()}}),e)}))),[]),_t=function(){var e=Object(l.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(Y,"organisation-units/parent-organisation-units/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(l.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,_t(1);case 3:a=e.sent,$e(a),e.next=8;break;case 7:$e([]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(1);case 2:t=e.sent,$e(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(l.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,_t(t.target.value);case 3:a=e.sent,ct(a),e.next=8;break;case 7:ct([]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(e){"Actual"==e.target.value?pe(!0):"Estimated"==e.target.value&&pe(!1)};Object(c.useEffect)((function(){Lt(),Pt(),Dt(),zt(),Et(),Ft(),Mt(),Bt()}),[Pt,Dt,zt,Et,Ft,Mt,Bt]);var qt=null,Gt=null,Vt=null,Qt=null,Ut=null,Kt=null,Xt=null,Jt=null;Ie&&Ie.length>0&&(qt=Ie.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)}))),Ae&&Ae.length>0&&(Gt=Ae.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)}))),Ee&&Ee.length>0&&(Vt=Ee.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)}))),We&&We.length>0&&(Qt=We.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)}))),qe&&qe.length>0&&(Ut=qe.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)}))),Ue&&Ue.length>0&&(Kt=Ue.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.name},e.id)}))),Ze&&Ze.length>0&&(Xt=Ze.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.name},e.id)}))),at&&at.length>0&&(Jt=at.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.name},e.id)})));var Zt=function(e,t){j(t,e)},$t=function(e,t){var a=e.target.value.replace(/[^a-z]/gi,"");j(t,a)};return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(X.jsx)(T.a,{className:ft.root,children:Object(X.jsxs)(R.a,{children:[Object(X.jsxs)("div",{className:"row mb-12 col-md-12",style:{paddingBottom:"5px"},children:[Object(X.jsx)("div",{className:"mb-6 col-md-6",children:Object(X.jsxs)(U.a,{"aria-label":"breadcrumb",children:[Object(X.jsx)(K.a,{style:{color:"#992E62"},children:"Patient"}),Object(X.jsx)(K.a,{style:{color:"#014d88"},children:"Registration"})]})}),Object(X.jsx)("div",{className:"mb-6 col-md-6",children:Object(X.jsx)(_.a,{to:{pathname:"/",state:"users"},children:Object(X.jsx)(h.a,{variant:"contained",color:"primary",className:" float-right ms-1",style:{backgroundColor:"#014d88",fontWeight:"bolder"},startIcon:Object(X.jsx)(W.a,{}),children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Back "})})})})]}),Object(X.jsx)("div",{className:"col-xl-12 col-lg-12",children:Object(X.jsxs)(f.a,{onSubmit:k(At,(function(e){console.error(e)})),children:[Object(X.jsxs)("div",{className:"card",children:[Object(X.jsx)("div",{className:"card-header",style:{backgroundColor:"#014d88",color:"#fff",fontWeight:"bolder"},children:Object(X.jsx)("h5",{className:"card-title",style:{color:"#fff",fontWeight:"bolder"},children:null===bt?"Basic Information":"Edit User Information"})}),Object(X.jsx)("div",{className:"card-body",children:Object(X.jsxs)("div",{className:"basic-form",children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"dateOfRegistration",children:["Date of Registration",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"date",name:"dateOfRegistration",id:"dateOfRegistration",max:q},r("dateOfRegistration")),{},{onChange:function(e){new Date(e.target.value)instanceof Date&&""!=e.target.value?ne(new Date(e.target.value).toISOString().substr(0,10).replace("T"," ")):ne((new Date).toISOString().substr(0,10).replace("T"," "))},style:{border:"1px solid #014d88"}})),A.dateOfRegistration&&Object(X.jsx)("p",{children:"Enter the registration date"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"patientId",children:["Hospital Number",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"hospitalNumber",id:"hospitalNumber",autoComplete:"off",onInput:function(e){e.target.value=e.target.value.replace(/\s/g,""),console.log(e.target.value),Tt(e.target.value)},onChange:Tt},r("hospitalNumber",{onChange:function(e){Tt(e.target.value.replace(/\s/g,""))}})),{},{style:{border:"1px solid #014d88"}})),it&&Object(X.jsx)("p",{children:"Hospital number has been registered before"}),!it&&A.hospitalNumber&&Object(X.jsx)("p",{children:"Enter the hospital number"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"ninNumber",children:"National Identification Number (NIN)"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",name:"ninNumber",type:"number"},r("ninNumber")),{},{id:"ninNumber",autoComplete:"off",onChange:function(e){console.log("here"),N("ninNumber"),e.target.value=e.target.value.replace(/\D/g,""),Rt(e),e.target.value.length>e.target.maxLength?(e.target.value=e.target.value.slice(0,e.target.maxLength),N("ninNumber")):e.target.value.length>0&&e.target.value.length<e.target.maxLength?S("ninNumber"):(e.target.value.length<=0||e.target.value.length==e.target.maxLength)&&N("ninNumber")},minLength:11,maxLength:11,style:{border:"1px solid #014d88"}})),dt&&Object(X.jsx)("p",{children:"NIN has been registered before"}),!dt&&A.ninNumber&&Object(X.jsx)("p",{children:"Enter a valid NIN Number"})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"firstName",children:["First Names ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"firstName",id:"firstName"},r("firstName",{onChange:function(e){$t(e,"firstName")}})),{},{style:{border:"1px solid #014d88"}})),A.firstName&&Object(X.jsx)("p",{children:"First Name is required"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Middle Name"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"middleName",id:"middleName"},r("middleName",{onChange:function(e){$t(e,"middleName")}})),{},{style:{border:"1px solid #014d88"}})),A.middleName&&Object(X.jsx)("p",{children:A.middleName.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["Last Name ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"lastName",id:"lastName"},r("lastName",{onChange:function(e){$t(e,"lastName")}})),{},{style:{border:"1px solid #014d88"}})),A.lastName&&Object(X.jsx)("p",{children:"Last Name is required"})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["Sex ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",name:"sex",id:"sex"},r("sex")),{},{style:{border:"1px solid #014d88"},children:[Object(X.jsx)("option",{value:"",children:"Select Sex"}),qt]})),A.sex&&Object(X.jsx)("p",{children:"Select Sex"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-2",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Date Of Birth"}),Object(X.jsx)("div",{className:"radio",children:Object(X.jsxs)("label",{children:[Object(X.jsx)("input",Object(s.a)(Object(s.a)({type:"radio",value:"Actual",name:"dateOfBirth",defaultChecked:!0},r("dateOfBirth")),{},{onChange:function(e){return Yt(e)},style:{border:"1px solid #014d88"}}))," ","Actual"]})}),Object(X.jsx)("div",{className:"radio",children:Object(X.jsxs)("label",{children:[Object(X.jsx)("input",Object(s.a)(Object(s.a)({type:"radio",value:"Estimated",name:"dateOfBirth"},r("dateOfBirth")),{},{onChange:function(e){return Yt(e)},style:{border:"1px solid #014d88"}}))," ","Estimated"]})})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-2",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Date"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"date",name:"dob",id:"dob",min:ee,max:ce},r("dob")),{},{onChange:function(e){N("dob"),new Date(e.target.value)instanceof Date?(console.log("date"),function(e){if(e.target.value){var t=new Date,a=new Date(e.target.value),c=t.getFullYear()-a.getFullYear();j("age",c)}else j("age",null)}(e),N("dob")):S("dob")},style:{border:"1px solid #014d88"}})),A.dob&&Object(X.jsx)("p",{children:"Enter a valid date of birth (dd/mm/yyyy)"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Age"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"number",name:"age",id:"age"},r("age")),{},{disabled:Oe,onChange:function(e){return function(e){if(console.log(e.target.value),!Oe&&e.target.value){j("age",e.target.value);var t=new Date;t.setDate(15),t.setMonth(5);var a=C(t.toISOString()).add(-1*e.target.value,"years");j("dob",Object(p.a)(new Date(a.toDate()),"yyyy-MM-dd")),It(Object(p.a)(new Date(a.toDate()),"yyyy-MM-dd"))>=60&&Nt()}}(e)},style:{border:"1px solid #014d88"}}))]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["Marital Status"," ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",name:"maritalStatus",id:"maritalStatus"},r("maritalStatus")),{},{style:{border:"1px solid #014d88"},children:[Object(X.jsx)("option",{value:"",children:"Select Marital Status"}),Gt]})),A.maritalStatus&&Object(X.jsx)("p",{children:"Select Marital Status"})]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["Employment Status"," ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",name:"employmentStatus",id:"employmentStatus"},r("employmentStatus")),{},{style:{border:"1px solid #014d88"},children:[Object(X.jsx)("option",{value:"",children:"Select Employment Status"}),Qt]})),A.employmentStatus&&Object(X.jsx)("p",{children:"Select Employment Status"})]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Education Level"}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",name:"highestQualification",id:"highestQualification"},r("highestQualification")),{},{style:{border:"1px solid #014d88"},children:[Object(X.jsx)("option",{value:"",children:"Select the Education Level"}),Vt]})),A.highestQualification&&Object(X.jsx)("p",{children:"Select the Education Level"})]})})]})]})})]}),Object(X.jsxs)("div",{className:"card",children:[Object(X.jsx)("div",{className:"card-header",style:{backgroundColor:"#014d88",color:"#fff",fontWeight:"bolder"},children:Object(X.jsx)("h5",{className:"card-title",children:"Contact Details"})}),Object(X.jsxs)("div",{className:"card-body",children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Phone Number"}),Object(X.jsx)(G.a,{containerStyle:{width:"100%",border:"1px solid #014d88"},inputStyle:{width:"100%",borderRadius:"0px"},country:"ng",masks:{ng:"...-...-....",at:"(....) ...-...."},placeholder:"(234)7099999999",value:u("pnumber"),onChange:function(e){Zt(e,"pnumber")},isValid:function(e,t){return e===t.countryCode||(e.length<13?(A.pnumber=!0,!1):(A.pnumber=!1,!0))}})]})}),Object(X.jsx)("div",{className:"form-group col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Alt. Phone Number"}),Object(X.jsx)(G.a,{containerStyle:{width:"100%",border:"1px solid #014d88"},inputStyle:{width:"100%",borderRadius:"0px"},country:"ng",masks:{ng:"...-...-....",at:"(....) ...-...."},placeholder:"(234)7099999999",value:u("altPhonenumber"),onChange:function(e){Zt(e,"altPhonenumber")},isValid:function(e,t){return e===t.countryCode||(e.length<13?(A.altPhonenumber=!0,"Enter a valid phone number"):(A.altPhonenumber=!1,!0))}}),A.altPhonenumber&&Object(X.jsx)("p",{children:A.altPhonenumber.message})]})}),Object(X.jsx)("div",{className:"form-group col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Email"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"email",name:"email",id:"email"},r("email",{required:!0,validate:function(e){console.log("ValidateEmail was called with",e);var t=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(e);return t||(A.email.message="Please enter a valid email"),(A.email&&t||!A.email&&!t)&&console.log("Fire tracker with",t?"Valid":"Invalid"),t}})),{},{style:{border:"1px solid #014d88"}})),A.email&&Object(X.jsx)("p",{children:A.email.message})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["Country ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("select",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"country",id:"country",style:{border:"1px solid #014d88"}},r("countryId")),{},{onChange:function(e){return Wt(e)},children:Kt}))]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["State ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"stateId",id:"stateId",style:{border:"1px solid #014d88"}},r("stateId")),{},{onChange:function(e){return Ht(e)},children:[Object(X.jsx)("option",{value:"",children:"Select State"}),Xt]})),A.stateId&&Object(X.jsx)("p",{children:"Select State"})]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{children:["Province/District/LGA"," ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"district",id:"district",style:{border:"1px solid #014d88"}},r("district")),{},{children:[Object(X.jsx)("option",{value:"",children:"Select Province/District/LGA"}),Jt]})),A.district&&Object(X.jsx)("p",{children:"Select Province/District/LGA"})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Street Address"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"address",id:"address",style:{border:"1px solid #014d88"}},r("address"))),A.address&&Object(X.jsx)("p",{children:A.address.message})]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Landmark"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"landmark",id:"landmark",style:{border:"1px solid #014d88"}},r("landmark"))),A.landmark&&Object(X.jsx)("p",{children:A.landmark.message})]})})]})]})]}),Object(X.jsxs)("div",{className:"card",children:[Object(X.jsx)("div",{className:"card-header",style:{backgroundColor:"#014d88",color:"#fff",fontWeight:"bolder"},children:Object(X.jsx)("h5",{className:"card-title",children:"Relationship / Next Of Kin"})}),Object(X.jsxs)("div",{className:"card-body",children:[Object(X.jsxs)("div",{className:"row",children:[oe&&oe.length>0&&Object(X.jsx)("div",{className:"col-xl-12 col-lg-12",children:Object(X.jsxs)("table",{style:{width:"100%"},children:[Object(X.jsx)("thead",{children:Object(X.jsxs)("tr",{children:[Object(X.jsx)("th",{children:"Relationship Type"}),Object(X.jsx)("th",{children:"Name"}),Object(X.jsx)("th",{children:"Phone"}),Object(X.jsx)("th",{children:"Address"}),Object(X.jsx)("th",{children:"Actions"})]})}),Object(X.jsx)("tbody",{children:oe.map((function(e,t){return Object(X.jsxs)("tr",{children:[Object(X.jsx)("td",{children:wt(e.relationshipId)}),Object(X.jsx)("td",{children:(c=e,c.surname+", "+c.firstName+" "+(c.otherName?c.otherName:""))}),Object(X.jsx)("td",{children:kt(e.contactPoint)}),Object(X.jsx)("td",{children:(a=e.address,a&&a.line&&a.line.length>0?a.line[0]:"")}),Object(X.jsxs)("td",{children:[Object(X.jsx)("button",{type:"button",className:"btn btn-default btn-light btn-sm editRow",onClick:function(a){return function(e,t){j("relationshipType",e.relationshipId),j("cfirstName",e.firstName),j("cmiddleName",e.otherName),j("clastName",e.surname),j("contactPhoneNumber",e.contactPoint?Ct(e.contactPoint).value:""),j("contactAddress",e.address&&e.address.line&&e.address.line.length>0?e.address.line[0]:""),xe(!0),Ne(t)}(e,t)},children:Object(X.jsx)(v.a,{icon:"edit"})}),"\xa0\xa0",Object(X.jsx)("button",{type:"button",className:"btn btn-danger btn-sm removeRow",onClick:function(e){return function(e){setTimeout((function(){oe.splice(e,1),se(oe),xe(!0),xe(!1)}),500)}(t)},children:Object(X.jsx)(v.a,{icon:"trash"})})]})]},e.index);var a,c}))})]})}),Object(X.jsx)("div",{className:"col-xl-12 col-lg-12",children:me&&Object(X.jsx)("div",{className:"card",children:Object(X.jsxs)("div",{className:"card-body",children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"relationshipType",children:["Relationship Type"," ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",name:"relationshipType",id:"relationshipType",style:{border:"1px solid #014d88"}},r("relationshipType")),{},{children:[Object(X.jsx)("option",{value:""}),Ut]})),A.relationshipType&&Object(X.jsx)("p",{children:A.relationshipType.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"cfirstName",children:["First Name"," ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"cfirstName",id:"cfirstName",style:{border:"1px solid #014d88"}},r("cfirstName",{onChange:function(e){$t(e,"cfirstName")}}))),A.cfirstName&&Object(X.jsx)("p",{children:A.cfirstName.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Middle Name"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"cmiddleName",id:"cmiddleName",style:{border:"1px solid #014d88"}},r("cmiddleName",{onChange:function(e){$t(e,"cmiddleName")}}))),A.cmiddleName&&Object(X.jsx)("p",{children:A.cmiddleName.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Last Name "}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"clastName",id:"clastName",style:{border:"1px solid #014d88"}},r("clastName",{onChange:function(e){$t(e,"clastName")}})))]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"contactPhoneNumber",children:"Phone Number"}),Object(X.jsx)(G.a,{containerStyle:{width:"100%",border:"1px solid #014d88"},inputStyle:{width:"100%",borderRadius:"0px"},country:"ng",onlyCountries:["ng"],masks:{ng:"...-...-....",at:"(....) ...-...."},placeholder:"(234)7099999999",value:u("contactPhoneNumber"),onChange:function(e){Zt(e,"contactPhoneNumber")},isValid:function(e,t){return e===t.countryCode||(e.length<13?(A.contactPhoneNumber=!0,"Enter a valid phone number"):(A.contactPhoneNumber=!1,!0))}}),A.contactPhoneNumber&&Object(X.jsx)("p",{children:A.contactPhoneNumber.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"contactEmail",children:"Email"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"contactEmail",id:"contactEmail",style:{border:"1px solid #014d88"}},r("contactEmail",{onChange:function(e){Zt(e,"contactEmail")}}))),A.contactEmail&&Object(X.jsx)("p",{children:A.contactEmail.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"contactAddress",children:["Address"," ",Object(X.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"contactAddress",id:"contactAddress",style:{border:"1px solid #014d88"}},r("contactAddress"))),A.contactAddress&&Object(X.jsx)("p",{children:A.contactAddress.message})]})})]}),Object(X.jsx)("div",{className:"row",children:Object(X.jsxs)("div",{className:"",children:[Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",className:ft.button,onClick:function(e){var t=u("relationshipType"),a=u("cfirstName"),c=u("cmiddleName"),n=u("clastName"),r=u("contactPhoneNumber"),i=(u("contactEmail"),u("contactAddress"));if(t)if(a)if(i){var o={address:{line:[i]},contactPoint:{type:"phone",value:r},firstName:a,fullName:a+" "+c+" "+n,relationshipId:t,surname:n,otherName:c};null!=ve?(oe.splice(ve,1),se(oe.concat(o))):se(void 0===oe?[].concat(o):oe.concat(o)),xe(!1)}else S("contactAddress",{type:"custom",message:"Address is required"},{shouldFocus:!0});else S("cfirstName",{type:"custom",message:"FirstName is required"},{shouldFocus:!0});else S("relationshipType",{type:"custom",message:"Relationship is required"},{shouldFocus:!0})},style:{backgroundColor:"#014d88",color:"#fff"},children:"Add"}),Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"secondary",className:ft.button,onClick:function(){xe(!1)},style:{backgroundColor:"#992E62",color:"#fff"},children:"Cancel"})]})})]})})})]}),Object(X.jsx)("div",{className:"row",children:Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",className:ft.button,startIcon:Object(X.jsx)(z.a,{}),onClick:function(){xe(!0)},style:{backgroundColor:"#014d88",fontWeight:"bolder"},children:"Add a Relative/Next Of Kin"})})]})]}),je?Object(X.jsx)(g.a,{}):"",Object(X.jsx)("br",{}),!it&&Object(X.jsx)(X.Fragment,{children:Object(X.jsx)(h.a,{type:"submit",variant:"contained",color:"primary",className:ft.button,startIcon:Object(X.jsx)(P.a,{}),style:{backgroundColor:"#014d88",color:"#fff"},children:je?Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Saving..."}):Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Save"})})}),Object(X.jsx)(h.a,{variant:"contained",className:ft.button,startIcon:Object(X.jsx)(F.a,{}),onClick:function(){mt.push("/")},style:{backgroundColor:"#992E62",color:"#fff"},children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Cancel"})})]})})]})}),Object(X.jsxs)(y.a,{show:yt,toggle:Nt,className:"fade",size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",children:[Object(X.jsx)(y.a.Header,{children:Object(X.jsx)(y.a.Title,{id:"contained-modal-title-vcenter",children:"Notification!"})}),Object(X.jsx)(y.a.Body,{children:Object(X.jsx)("h4",{children:"Are you Sure of the Age entered?"})}),Object(X.jsx)(y.a.Footer,{children:Object(X.jsx)(h.a,{onClick:Nt,style:{backgroundColor:"#014d88",color:"#fff"},children:"Yes"})})]})]})};N.b.add(S.a,S.b,S.c,S.d);var ee=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{},Select:{height:45,width:300},button:{margin:e.spacing(1)},root:{marginBottom:20,flexGrow:1,"& .card-title":{color:"#fff",fontWeight:"bold"},"& .form-control":{borderRadius:"0.25rem",height:"41px"},"& .card-header:first-child":{borderRadius:"calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0"},"& .dropdown-toggle::after":{display:" block !important"},"& select":{"-webkit-appearance":"listbox !important"},"& p":{color:"red"},"& label":{fontSize:"14px",color:"#014d88",fontWeight:"bold"}},demo:{backgroundColor:e.palette.background.default},inline:{display:"inline"}}})),te=k.c().shape({dateOfRegistration:k.a().required(),hospitalNumber:k.d().required(),firstName:k.d().required(),middleName:k.d().nullable(),lastName:k.d().required(),sex:k.b().required(),employmentStatus:k.b().required(),maritalStatus:k.b().required(),dob:k.a().required(),dateOfBirth:k.d().required(),age:k.b(),ninNumber:k.d().nullable(),pnumber:k.d().required(),altPhonenumber:k.d().nullable(),email:k.d().nullable(),address:k.d().nullable(),landmark:k.d().nullable(),countryId:k.b().required(),stateId:k.b().required(),district:k.b().nullable()}),ae=function(e){var t,a=Object(L.d)({resolver:Object(w.a)(te)}),r=a.register,i=a.watch,j=a.setValue,u=a.getValues,v=a.clearErrors,N=a.setError,S=a.handleSubmit,k=a.formState,I=Object(c.useState)(""),B=Object(d.a)(I,2),A=(B[0],B[1]),P=k.errors,D=(k.isSubmitting,i("pnumber",!1),i("altPhonenumber",!1),i("contactPhoneNumber",!1),i("age",!1),Object(c.useState)((new Date).toISOString().substr(0,10).replace("T"," "))),z=Object(d.a)(D,2),E=z[0],F=(z[1],Object(c.useState)(new Date("1/1/1930").toISOString().substr(0,10).replace("T"," "))),q=Object(d.a)(F,2),V=q[0],J=(q[1],Object(c.useState)((new Date).toISOString().substr(0,10).replace("T"," "))),Z=Object(d.a)(J,2),$=Z[0],ae=Z[1],ce=Object(c.useState)([]),ne=Object(d.a)(ce,2),re=ne[0],ie=ne[1],oe=Object(c.useState)(!1),se=Object(d.a)(oe,2),le=se[0],de=(se[1],Object(c.useState)(!0)),je=Object(d.a)(de,2),be=je[0],ue=je[1],Oe=Object(c.useState)(!1),pe=Object(d.a)(Oe,2),he=pe[0],fe=(pe[1],Object(c.useState)(null)),me=Object(d.a)(fe,2),xe=(me[0],me[1],Object(c.useState)([])),ge=Object(d.a)(xe,2),ye=(ge[0],ge[1],Object(c.useState)([])),ve=Object(d.a)(ye,2),Ne=ve[0],Se=ve[1],we=Object(c.useState)([]),ke=Object(d.a)(we,2),Ce=ke[0],Ie=ke[1],Be=Object(c.useState)([]),Te=Object(d.a)(Be,2),Re=Te[0],Ae=Te[1],Pe=Object(c.useState)([]),De=Object(d.a)(Pe,2),ze=De[0],Ee=De[1],Fe=Object(c.useState)([]),Me=Object(d.a)(Fe,2),_e=Me[0],We=Me[1],Le=Object(c.useState)([]),He=Object(d.a)(Le,2),Ye=He[0],qe=He[1],Ge=Object(c.useState)([]),Ve=Object(d.a)(Ge,2),Qe=Ve[0],Ue=Ve[1],Ke=Object(c.useState)([]),Xe=Object(d.a)(Ke,2),Je=Xe[0],Ze=Xe[1],$e=Object(c.useState)(!1),et=Object(d.a)($e,2),tt=et[0],at=et[1],ct=Object(c.useState)(!1),nt=Object(d.a)(ct,2),rt=nt[0],it=nt[1],ot=e.location&&e.location.state?e.location.state.user:null,st=Object(c.useState)(null),lt=Object(d.a)(st,2),dt=lt[0],jt=lt[1],bt=ee(),ut=Object(o.g)(),Ot=n.a.useState(!1),pt=Object(d.a)(Ot,2),ht=pt[0],ft=pt[1],mt=function(){return ft(!ht)},xt=Object(o.h)().state;t=xt?xt.patientId:null;var gt=Object(c.useState)({}),yt=Object(d.a)(gt,2),vt=yt[0],Nt=yt[1],St=function(e){var t=_e.find((function(t){return t.id==e}));return t?t.display:""},wt=function(e){if(null!==e.value)return e?kt(e).value:""},kt=function(e){var t;return void 0!=e&&null!==typeof(null===e||void 0===e?void 0:e.value)&&"undefined"!==typeof(null===e||void 0===e?void 0:e.value)&&"0"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.charAt(0))&&(e.value=e.value.replace("0","234")),e},Ct=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return c<=0&&n<0&&t.getDate()<a.getDate()&&c--,0===c?n:c},It=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var a,c,n,r,i,o,s,l,d,u,h,f,m,x,g,y,v,N,S,w,k;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=65;break}return e.next=3,O.a.get("".concat(Y,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 3:return r=e.sent,e.next=6,O.a.get("".concat(Y,"application-codesets/v2/SEX"),{headers:{Authorization:"Bearer ".concat(H)}});case 6:if(i=e.sent,o=r.data,Nt(o),s=o.contact?o.contact:[],ie(s.contact),l=o.identifier,d=o.address,u=null===o||void 0===o?void 0:o.contactPoint,h=l.identifier.find((function(e){return"HospitalNumber"==e.type})),f=kt(null===u||void 0===u||null===(a=u.contactPoint)||void 0===a?void 0:a.find((function(e){return"phone"==e.type}))),m=null===u||void 0===u||null===(c=u.contactPoint)||void 0===c?void 0:c.find((function(e){return"email"==e.type})),x=kt(null===u||void 0===u||null===(n=u.contactPoint)||void 0===n?void 0:n.find((function(e){return"altphone"==e.type}))),g=d&&d.address&&d.address.length>0?d.address[0]:null,o.gender,y=Q.a.find(i.data,{display:Q.a.upperFirst(Q.a.lowerCase(o.sex))}).id,v=o.employmentStatus,N=o.education,S=o.maritalStatus,jt(o.facilityId),j("dateOfRegistration",o.dateOfRegistration),j("facilityId",o.facilityId),j("ninNumber",o.ninNumber),j("firstName",o.firstName),j("middleName",o.otherName),j("lastName",o.surname),j("hospitalNumber",h?h.value:""),j("maritalStatus",S?S.id:""),j("employmentStatus",v?v.id:""),j("sex",y),j("highestQualification",N?N.id:""),j("dob",Object(p.a)(new Date(o.dateOfBirth),"yyyy-MM-dd")),j("age",Ct(o.dateOfBirth)),!g){e.next=62;break}if(j("countryId",g.countryId),!g.countryId){e.next=46;break}return e.next=43,Mt(g.countryId);case 43:e.t0=e.sent,e.next=47;break;case 46:e.t0="";case 47:if(w=e.t0,Ue(w),j("stateId",g.stateId),!g.stateId){e.next=56;break}return e.next=53,Mt(g.stateId);case 53:e.t1=e.sent,e.next=57;break;case 56:e.t1="";case 57:k=e.t1,Ze(k),j("district",g.district),j("address",g.city),j("landmark",g.line[0]);case 62:j("pnumber",f?f.value:"+234"),j("email",m?m.value:null),j("altPhonenumber",x?x.value:"+234");case 65:case"end":return e.stop()}}),e)}))),[]),Bt=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return at(!1),e.next=3,O.a.post("".concat(Y,"patient/exist/hospital-number"),t,{responseType:"text",headers:{Authorization:"Bearer ".concat(H),"Content-Type":"text/plain"}}).then((function(e){e.data?at(!0):at(!1)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(it(!1),!(t.target.value.length>0)){e.next=4;break}return e.next=4,O.a.post("".concat(Y,"patient/exist/nin-number/").concat(t.target.value),t.target.value,{responseType:"text",headers:{Authorization:"Bearer ".concat(H),"Content-Type":"text/plain"}}).then((function(e){e.data?it(!0):it(!1)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(l.a)(b.a.mark((function e(a){var c,n,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q.a.find(P,(function(e){return e}))){e.next=4;break}M.b.error("Failed to save form kindly check the form for errors",{position:M.b.POSITION.TOP_RIGHT}),e.next=29;break;case 4:if(e.prev=4,c={active:!0,address:[{city:a.address,countryId:a.countryId,district:a.district,line:[a.landmark],organisationUnitId:0,postalCode:"",stateId:a.stateId}],contact:re,contactPoint:[],dateOfBirth:new Date(a.dob),deceased:!1,deceasedDateTime:null,firstName:a.firstName,sexId:a.sex,identifier:[{assignerId:1,type:"HospitalNumber",value:a.hospitalNumber}],ninNumber:a.ninNumber,otherName:a.middleName,maritalStatusId:a.maritalStatus,surname:a.lastName,educationId:a.highestQualification,employmentStatusId:null!=a.employmentStatus?a.employmentStatus:null,dateOfRegistration:a.dateOfRegistration,isDateOfBirthEstimated:"Actual"!=a.dateOfBirth},n={type:"phone",value:a.pnumber},a.email&&(r={type:"email",value:a.email},c.contactPoint.push(r)),a.altPhonenumber&&(i={type:"altphone",value:a.altPhonenumber},c.contactPoint.push(i)),c.contactPoint.push(n),!t){e.next=18;break}return c.id=null,c.facilityId=dt,e.next=15,O.a.put("".concat(Y,"patient/").concat(t),c,{headers:{Authorization:"Bearer ".concat(H)}});case 15:e.sent,e.next=21;break;case 18:return e.next=20,O.a.post("".concat(Y,"patient"),c,{headers:{Authorization:"Bearer ".concat(H)}});case 20:e.sent;case 21:M.b.success("Patient Register successful"),ut.push("/"),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(4),console.log(e.t0),M.b.error("An error occured while registering a patient !",{position:M.b.POSITION.TOP_RIGHT});case 29:case"end":return e.stop()}}),e,null,[[4,25]])})));return function(t){return e.apply(this,arguments)}}(),At=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/SEX"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:return t=e.sent,e.next=6,Se(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),M.b.error("An error occured while fetching sex codesets !",{position:M.b.POSITION.TOP_RIGHT});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Pt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/MARITAL_STATUS"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Ie(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching marital codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Dt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/EDUCATION"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Ae(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching education codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),zt=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/OCCUPATION"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Ee(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching occupation codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Et=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"application-codesets/v2/RELATIONSHIP"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,We(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.b.error("An error occured while fetching relationship codesets !",{position:M.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Ft=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(Y,"organisation-units/parent-organisation-units/0"),{headers:{Authorization:"Bearer ".concat(H)}});case 2:t=e.sent,qe(t.data);case 4:case"end":return e.stop()}}),e)}))),[]),Mt=function(){var e=Object(l.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(Y,"organisation-units/parent-organisation-units/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=Object(l.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,Mt(t.target.value);case 3:a=e.sent,Ue(a),e.next=8;break;case 7:Ue([]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(l.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,Mt(t.target.value);case 3:a=e.sent,Ze(a),e.next=8;break;case 7:Ze([]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(e){"Actual"==e.target.value?ue(!0):"Estimated"==e.target.value&&ue(!1)};Object(c.useEffect)((function(){At(),Pt(),Dt(),zt(),Et(),Ft(),It(),Vt()}),[At,Pt,Dt,zt,Et,Ft,It]);var Ht=null,Yt=null,qt=null,Gt=null;Ne&&Ne.length>0&&Ne.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)})),Ce&&Ce.length>0&&Ce.map((function(e,t){return Object(X.jsx)("option",{value:e.id,defaultValue:e.display,children:e.display},e.id)})),Re&&Re.length>0&&Re.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)})),ze&&ze.length>0&&ze.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)})),_e&&_e.length>0&&(Ht=_e.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.display},e.id)}))),Ye&&Ye.length>0&&(Yt=Ye.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.name},e.id)}))),Qe&&Qe.length>0&&(qt=Qe.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.name},e.id)}))),Je&&Je.length>0&&(Gt=Je.map((function(e,t){return Object(X.jsx)("option",{value:e.id,children:e.name},e.id)})));var Vt=function(){var e="";return 0!==Object.keys(vt).length&&null!==vt.address.address[0].district&&Je.map((function(t,a){t.id===vt.address.address[0].district&&(e=t.name,A(e))})),e},Qt=function(e,t){j(t,e)},Ut=function(e,t){var a=e.target.value.replace(/[^a-z]/gi,"");j(t,a)};return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(X.jsx)(T.a,{className:bt.root,children:Object(X.jsxs)(R.a,{children:[Object(X.jsxs)("div",{className:"row mb-12 col-md-12",style:{paddingBottom:"5px"},children:[Object(X.jsx)("div",{className:"mb-6 col-md-6",children:Object(X.jsxs)(U.a,{"aria-label":"breadcrumb",children:[Object(X.jsx)(K.a,{style:{color:"#992E62"},children:"Patient"}),Object(X.jsx)(K.a,{style:{color:"#014d88"},children:"Registration"})]})}),Object(X.jsx)("div",{className:"mb-6 col-md-6",children:Object(X.jsx)(_.a,{to:{pathname:"/",state:"users"},children:Object(X.jsx)(h.a,{variant:"contained",color:"primary",className:" float-right ms-1",style:{backgroundColor:"#014d88",fontWeight:"bolder"},startIcon:Object(X.jsx)(W.a,{}),children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Back "})})})})]}),Object(X.jsx)("div",{className:"col-xl-12 col-lg-12",children:Object(X.jsxs)(f.a,{onSubmit:S(Rt,(function(e){console.error(e)})),children:[Object(X.jsxs)("div",{className:"card",children:[Object(X.jsx)("div",{className:"card-header",style:{backgroundColor:"#014d88",color:"#fff",fontWeight:"bolder"},children:Object(X.jsx)("h5",{className:"card-title",style:{color:"#fff",fontWeight:"bolder"},children:null===ot?"Basic Information":"Edit User Information"})}),Object(X.jsx)("div",{className:"card-body",children:Object(X.jsxs)("div",{className:"basic-form",children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"dateOfRegistration",children:["Date of Registration*"," "]}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"date",name:"dateOfRegistration",id:"dateOfRegistration",max:E},r("dateOfRegistration")),{},{onChange:function(e){new Date(e.target.value)instanceof Date&&""!=e.target.value?ae(new Date(e.target.value).toISOString().substr(0,10).replace("T"," ")):ae((new Date).toISOString().substr(0,10).replace("T"," "))},style:{border:"1px solid #014d88"},readOnly:!0})),P.dateOfRegistration&&Object(X.jsx)("p",{children:"Enter the registration date"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"patientId",children:"Hospital Number* "}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"hospitalNumber",id:"hospitalNumber",autoComplete:"off",onInput:function(e){e.target.value=e.target.value.replace(/\s/g,""),console.log(e.target.value),Bt(e.target.value)},onChange:Bt},r("hospitalNumber",{onChange:function(e){Bt(e.target.value.replace(/\s/g,""))}})),{},{style:{border:"1px solid #014d88"},readOnly:!0})),tt&&Object(X.jsx)("p",{children:"Hospital number has been registered before"}),!tt&&P.hospitalNumber&&Object(X.jsx)("p",{children:"Enter the hospital number"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"ninNumber",children:"National Identification Number (NIN)"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",name:"ninNumber",type:"number"},r("ninNumber")),{},{id:"ninNumber",autoComplete:"off",onChange:function(e){console.log("here"),v("ninNumber"),e.target.value=e.target.value.replace(/\D/g,""),Tt(e),e.target.value.length>e.target.maxLength?(e.target.value=e.target.value.slice(0,e.target.maxLength),v("ninNumber")):e.target.value.length>0&&e.target.value.length<e.target.maxLength?N("ninNumber"):(e.target.value.length<=0||e.target.value.length==e.target.maxLength)&&v("ninNumber")},minLength:11,maxLength:11,style:{border:"1px solid #014d88"},readOnly:!0})),rt&&Object(X.jsx)("p",{children:"NIN has been registered before"}),!rt&&P.ninNumber&&Object(X.jsx)("p",{children:"Enter a valid NIN Number"})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"firstName",children:"First Names *"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"firstName",id:"firstName"},r("firstName",{onChange:function(e){Ut(e,"firstName")}})),{},{style:{border:"1px solid #014d88"},readOnly:!0})),P.firstName&&Object(X.jsx)("p",{children:"First Name is required"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Middle Name"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"middleName",id:"middleName"},r("middleName",{onChange:function(e){Ut(e,"middleName")}})),{},{style:{border:"1px solid #014d88"},readOnly:!0})),P.middleName&&Object(X.jsx)("p",{children:P.middleName.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Last Name *"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"lastName",id:"lastName"},r("lastName",{onChange:function(e){Ut(e,"lastName")}})),{},{style:{border:"1px solid #014d88"},readOnly:!0})),P.lastName&&Object(X.jsx)("p",{children:"Last Name is required"})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Sex *"}),Object(X.jsx)("input",{className:"form-control",type:"text",name:"sex",id:"sex",value:null!==vt.sex?vt.sex:" ",style:{border:"1px solid #014d88"},readOnly:!0}),P.sex&&Object(X.jsx)("p",{children:"Select Sex"})]})}),Object(X.jsx)("div",{className:"form-group mb-2 col-md-2",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Date Of Birth"}),Object(X.jsx)("div",{className:"radio",children:Object(X.jsxs)("label",{children:[Object(X.jsx)("input",Object(s.a)(Object(s.a)({type:"radio",value:"Actual",name:"dateOfBirth",defaultChecked:!0},r("dateOfBirth")),{},{onChange:function(e){return Lt(e)},style:{border:"1px solid #014d88"}}))," ","Actual"]})}),Object(X.jsx)("div",{className:"radio",children:Object(X.jsxs)("label",{children:[Object(X.jsx)("input",Object(s.a)(Object(s.a)({type:"radio",value:"Estimated",name:"dateOfBirth"},r("dateOfBirth")),{},{onChange:function(e){return Lt(e)},style:{border:"1px solid #014d88"}}))," ","Estimated"]})})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-2",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Date"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"date",name:"dob",id:"dob",min:V,max:$},r("dob")),{},{onChange:function(e){v("dob"),new Date(e.target.value)instanceof Date?(console.log("date"),function(e){if(e.target.value){var t=new Date,a=new Date(e.target.value),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();(n<0||0===n&&t.getDate()<a.getDate())&&c--,j("age",c)}else j("age",null)}(e),v("dob")):N("dob")},style:{border:"1px solid #014d88"},readOnly:!0})),P.dob&&Object(X.jsx)("p",{children:"Enter a valid date of birth (dd/mm/yyyy)"})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Age"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"number",name:"age",id:"age"},r("age")),{},{disabled:be,onChange:function(e){return function(e){if(!be&&e.target.value){j("age",e.target.value);var t=new Date;t.setDate(15),t.setMonth(5);var a=C(t.toISOString()).add(-1*e.target.value,"years");j("dob",Object(p.a)(new Date(a.toDate()),"yyyy-MM-dd")),Ct(Object(p.a)(new Date(a.toDate()),"yyyy-MM-dd"))>=60&&mt()}}(e)},style:{border:"1px solid #014d88"},readOnly:!0}))]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Marital Status *"}),Object(X.jsx)("input",{className:"form-control",type:"text",name:"maritalStatus",id:"maritalStatus",value:0!==Object.keys(vt).length&&null!==vt.maritalStatus?vt.maritalStatus.display:"",style:{border:"1px solid #014d88"},readOnly:!0}),P.maritalStatus&&Object(X.jsx)("p",{children:"Select Marital Status"})]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Employment Status *"}),Object(X.jsx)("input",{className:"form-control",type:"text",name:"employmentStatus",id:"employmentStatus",value:0!==Object.keys(vt).length&&null!==vt.employmentStatus?vt.employmentStatus.display:" ",style:{border:"1px solid #014d88"},readOnly:!0}),P.employmentStatus&&Object(X.jsx)("p",{children:"Select Employment Status"})]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Education Level"}),Object(X.jsx)("input",{className:"form-control",type:"text",name:"highestQualification",id:"highestQualification",value:0!==Object.keys(vt).length&&null!==vt.education?vt.education.display:"",style:{border:"1px solid #014d88"},readOnly:!0}),P.highestQualification&&Object(X.jsx)("p",{children:"Select the Education Level"})]})})]})]})})]}),Object(X.jsxs)("div",{className:"card",children:[Object(X.jsx)("div",{className:"card-header",style:{backgroundColor:"#014d88",color:"#fff",fontWeight:"bolder"},children:Object(X.jsx)("h5",{className:"card-title",children:"Contact Details"})}),Object(X.jsxs)("div",{className:"card-body",children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Phone Number *"}),Object(X.jsx)(G.a,{containerStyle:{width:"100%",border:"1px solid #014d88"},inputStyle:{width:"100%",borderRadius:"0px"},country:"ng",masks:{ng:"...-...-....",at:"(....) ...-...."},placeholder:"(234)7099999999",value:u("pnumber"),onChange:function(e){Qt(e,"pnumber")},isValid:function(e,t){return e===t.countryCode||(e.length<13?(P.pnumber=!0,!1):(P.pnumber=!1,!0))},disabled:!0})]})}),Object(X.jsx)("div",{className:"form-group col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Alt. Phone Number"}),Object(X.jsx)(G.a,{containerStyle:{width:"100%",border:"1px solid #014d88"},inputStyle:{width:"100%",borderRadius:"0px"},country:"ng",masks:{ng:"...-...-....",at:"(....) ...-...."},placeholder:"(234)7099999999",value:u("altPhonenumber"),onChange:function(e){Qt(e,"altPhonenumber")},isValid:function(e,t){return e===t.countryCode||(e.length<13?(P.altPhonenumber=!0,"Enter a valid phone number"):(P.altPhonenumber=!1,!0))},disabled:!0}),P.altPhonenumber&&Object(X.jsx)("p",{children:P.altPhonenumber.message})]})}),Object(X.jsx)("div",{className:"form-group col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Email"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"email",name:"email",id:"email"},r("email",{required:!0,validate:function(e){console.log("ValidateEmail was called with",e);var t=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(e);return t||(P.email.message="Please enter a valid email"),(P.email&&t||!P.email&&!t)&&console.log("Fire tracker with",t?"Valid":"Invalid"),t}})),{},{style:{border:"1px solid #014d88"},readOnly:!0})),P.email&&Object(X.jsx)("p",{children:P.email.message})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Country *"}),Object(X.jsx)("select",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"country",id:"country",readOnly:!0,style:{border:"1px solid #014d88"}},r("countryId")),{},{onChange:function(e){return _t(e)},children:Yt}))]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"State *"}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"stateId",id:"stateId",readOnly:!0,style:{border:"1px solid #014d88"}},r("stateId")),{},{onChange:function(e){return Wt(e)},children:[Object(X.jsx)("option",{value:"",children:"Select State"}),qt]}))]})}),Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Province/District/LGA *"}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"district",id:"district",readOnly:!0,style:{border:"1px solid #014d88"}},r("district")),{},{children:[Object(X.jsx)("option",{value:"",children:"Select Province/District/LGA"}),Gt]})),P.district&&Object(X.jsx)("p",{children:"Select Province/District/LGA"})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group  col-md-4",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Street Address"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"address",id:"address",style:{border:"1px solid #014d88"}},r("address")),{},{readOnly:!0})),P.address&&Object(X.jsx)("p",{children:P.address.message})]})}),Object(X.jsx)("div",{className:"form-group  col-md-6",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Landmark"}),Object(X.jsx)("input",Object(s.a)(Object(s.a)({className:"form-control",type:"text",name:"landmark",id:"landmark",style:{border:"1px solid #014d88"}},r("landmark")),{},{readOnly:!0})),P.landmark&&Object(X.jsx)("p",{children:P.landmark.message})]})})]})]})]}),Object(X.jsxs)("div",{className:"card",children:[Object(X.jsx)("div",{className:"card-header",style:{backgroundColor:"#014d88",color:"#fff",fontWeight:"bolder"},children:Object(X.jsx)("h5",{className:"card-title",children:"Relationship / Next Of Kin"})}),Object(X.jsx)("div",{className:"card-body",children:Object(X.jsxs)("div",{className:"row",children:[re&&re.length>0&&Object(X.jsx)("div",{className:"col-xl-12 col-lg-12",children:Object(X.jsxs)("table",{style:{width:"100%"},children:[Object(X.jsx)("thead",{children:Object(X.jsxs)("tr",{children:[Object(X.jsx)("th",{children:"Relationship Type"}),Object(X.jsx)("th",{children:"Name"}),Object(X.jsx)("th",{children:"Phone"}),Object(X.jsx)("th",{children:"Address"})]})}),Object(X.jsx)("tbody",{children:re.map((function(e,t){return Object(X.jsxs)("tr",{children:[Object(X.jsx)("td",{children:St(e.relationshipId)}),Object(X.jsx)("td",{children:(c=e,c.surname+", "+c.firstName+" "+(c.otherName?c.otherName:""))}),Object(X.jsx)("td",{children:wt(e.contactPoint)}),Object(X.jsx)("td",{children:(a=e.address,a&&a.line&&a.line.length>0?a.line[0]:"")})]},e.index);var a,c}))})]})}),Object(X.jsx)("div",{className:"col-xl-12 col-lg-12",children:he&&Object(X.jsx)("div",{className:"card",children:Object(X.jsxs)("div",{className:"card-body",children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"relationshipType",children:"Relationship Type *"}),Object(X.jsxs)("select",Object(s.a)(Object(s.a)({className:"form-control",name:"relationshipType",id:"relationshipType",style:{border:"1px solid #014d88"}},r("relationshipType")),{},{children:[Object(X.jsx)("option",{value:""}),Ht]})),P.relationshipType&&Object(X.jsx)("p",{children:P.relationshipType.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"cfirstName",children:"First Name *"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"cfirstName",id:"cfirstName",style:{border:"1px solid #014d88"}},r("cfirstName",{onChange:function(e){Ut(e,"cfirstName")}}))),P.cfirstName&&Object(X.jsx)("p",{children:P.cfirstName.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Middle Name"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"cmiddleName",id:"cmiddleName",style:{border:"1px solid #014d88"}},r("cmiddleName",{onChange:function(e){Ut(e,"cmiddleName")}}))),P.cmiddleName&&Object(X.jsx)("p",{children:P.cmiddleName.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{children:"Last Name "}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"clastName",id:"clastName",style:{border:"1px solid #014d88"}},r("clastName",{onChange:function(e){Ut(e,"clastName")}}))),P.clastName&&Object(X.jsx)("p",{children:P.clastName.message})]})})]}),Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"contactPhoneNumber",children:"Phone Number"}),Object(X.jsx)(G.a,{containerStyle:{width:"100%",border:"1px solid #014d88"},inputStyle:{width:"100%",borderRadius:"0px"},country:"ng",onlyCountries:["ng"],masks:{ng:"...-...-....",at:"(....) ...-...."},placeholder:"(234)7099999999",value:u("contactPhoneNumber"),onChange:function(e){Qt(e,"contactPhoneNumber")},isValid:function(e,t){return e===t.countryCode||(e.length<13?(P.contactPhoneNumber=!0,"Enter a valid phone number"):(P.contactPhoneNumber=!1,!0))}}),"//",P.contactPhoneNumber&&Object(X.jsx)("p",{children:P.contactPhoneNumber.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"contactEmail",children:"Email"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"contactEmail",id:"contactEmail",style:{border:"1px solid #014d88"}},r("contactEmail",{onChange:function(e){Qt(e,"contactEmail")}}))),P.contactEmail&&Object(X.jsx)("p",{children:P.contactEmail.message})]})}),Object(X.jsx)("div",{className:"form-group mb-3 col-md-3",children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"contactAddress",children:"Address"}),Object(X.jsx)("input",Object(s.a)({className:"form-control",type:"text",name:"contactAddress",id:"contactAddress",style:{border:"1px solid #014d88"}},r("contactAddress"))),P.contactAddress&&Object(X.jsx)("p",{children:P.contactAddress.message})]})})]})]})})})]})})]}),le?Object(X.jsx)(g.a,{}):"",Object(X.jsx)("br",{})]})})]})}),Object(X.jsxs)(y.a,{show:ht,toggle:mt,className:"fade",size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",children:[Object(X.jsx)(y.a.Header,{children:Object(X.jsx)(y.a.Title,{id:"contained-modal-title-vcenter",children:"Notification!"})}),Object(X.jsx)(y.a.Body,{children:Object(X.jsx)("h4",{children:"Are you Sure of the Age entered?"})}),Object(X.jsx)(y.a.Footer,{children:Object(X.jsx)(h.a,{onClick:mt,style:{backgroundColor:"#014d88",color:"#fff"},children:"Yes"})})]})]})},ce=(a(627),a(693)),ne=a(11),re=a(1047),ie=a(1048),oe=a(1049),se=a(201),le=a(1042),de=a(1043),je=a(18),be=a(10),ue=a(1038),Oe=a(1039),pe=a(1086),he=a(1040),fe=a(1041),me=a(1044),xe=a(80),ge=a.n(xe),ye=a(1081),ve=a(255),Ne=(a(254),a(1093),a(1097));a(1096),a(513),Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},error:{color:"#f85032",fontSize:"12.8px"}}}));Object(ne.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}}))((function(e){var t=e.classes,a=e.patientObj?e.patientObj:{},n=e.permissions?e.permissions:[],r=Object(c.useState)(!1),i=Object(d.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(e.patientBiometricStatus),j=Object(d.a)(l,2),b=j[0],u=j[1],p=Object(c.useState)(!1),h=Object(d.a)(p,2),f=h[0],m=h[1],x=Object(c.useState)([]),g=Object(d.a)(x,2),y=(g[0],g[1]);Object(c.useEffect)((function(){u(e.patientBiometricStatus),N()}),[e.patientBiometricStatus]);var v,N=function(){O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){m(e.data),!0===e.data&&O.a.get("".concat(Y,"biometrics/devices"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){y(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){}))};return Object(X.jsxs)("div",{className:t.root,children:[Object(X.jsxs)(U.a,{"aria-label":"breadcrumb",children:[Object(X.jsx)(se.a,{style:{color:"#992E62"},children:"Patient"}),Object(X.jsx)(se.a,{style:{color:"#014d88"},children:"Dashboard"})]}),Object(X.jsxs)(re.a,{defaultExpanded:!0,children:[Object(X.jsx)(ie.a,{children:Object(X.jsx)(le.a,{children:Object(X.jsx)(de.a,{md:11,children:Object(X.jsxs)(le.a,{className:"mt-1",children:[Object(X.jsx)(de.a,{md:12,className:t.root2,children:Object(X.jsx)("b",{style:{fontSize:"25px",color:"rgb(153, 46, 98)"},children:a.surname+", "+a.firstName+" "+a.otherName!==null?a.otherName:" "})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Hospital Number : ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""}(a.identifier)})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:["Date Of Birth : ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:a.dateOfBirth})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Age : ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"}(a.dateOfBirth)})]})}),Object(X.jsx)(de.a,{md:4,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Sex :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA",fontFamily:"'poppins', sans-serif",fontWeight:"bolder"},children:a.sex})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Phone Number : ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=e.contactPoint.find((function(e){return"phone"==e.type}));return t?t.value:""}(a.contactPoint)})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Address : ",Object(X.jsxs)("b",{style:{color:"#0B72AA"},children:[(v=a.address,v&&v.address&&v.address.length>0?"".concat(v.address[0].line[0],", ").concat(v.address[0].city):null)," "]})]})})]})})})}),Object(X.jsx)(oe.a,{className:t.details,children:!0===f?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{children:Object(X.jsxs)(se.a,{variant:"caption",children:[Object(X.jsxs)(ce.a,{style:{height:"30px",fontSize:"14px"},color:!0===b?"green":"red",size:"large",children:["Biometric Status",Object(X.jsx)(ce.a.Detail,{children:!0===b?"Captured":"Not Captured"})]}),!0!==b?Object(X.jsx)(X.Fragment,{children:n.includes("patient_check_in")||n.includes("all_permission")?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)(ce.a,{style:{height:"30px",fontSize:"14px"},as:"a",color:"teal",onClick:function(){return a.id,void s(!o)},tag:!0,children:"Capture Now"})}):""}):""]})})}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{children:Object(X.jsx)(se.a,{variant:"caption",children:Object(X.jsx)(ce.a,{color:"red",style:{height:"30px",fontSize:"14px"},children:"Biometrics Module Not Install"})})})})})]})]})}));var Se=a(1079),we=a(1094),ke=a(75),Ce=a.n(ke),Ie=a(1087),Be=a(1098),Te=a(1100),Re=a(1101),Ae=a(1099),Pe=a(1090),De=a(1076),ze=a(78),Ee=a.n(ze),Fe=a(683),Me=a.n(Fe),_e=a(684),We=a.n(_e),Le=a(1060),He=a(337),Ye=a(284),qe=a.n(Ye),Ge=a(1077),Ve=a(1082),Qe=a(1061),Ue=a.p+"static/media/fingerprintimage.73ff98ea.png",Ke=a(385),Xe=a.n(Ke),Je=Object(B.a)((function(e){return{root:{width:"100%","& .dropdown-toggle::after, .dropleft .dropdown-toggle::before, .dropright .dropdown-toggle::before, .dropup .dropdown-toggle::after":{fontFamily:"FontAwesome",border:"0",verticalAlign:"middle",marginLeft:".25em",lineHeight:"1"},"& .dropdown-menu .dropdown-item":{fontSize:"14px",color:"#014d88",padding:"0.3rem 1.5rem",fontWeight:"bold"},"& .mt-4":{marginTop:"28px !important"},"& .form-control":{color:"#992E62"},"& .form-control:focus":{color:"#014d88"},"& .sharp ":{"min-width":"35px",padding:"5px",height:"35px","min-height":"35px"}},card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"}}}));var Ze=function(e){var t=Je(),a=Object(o.g)(),r=a.location&&a.location.state?a.location.state.permissions:[],i=Object(c.useState)([]),j=Object(d.a)(i,2),u=j[0],p=j[1],f=Object(c.useState)({biometricType:"FINGERPRINT",patientId:e.patientId,templateType:"",device:"",reason:"",age:""}),g=Object(d.a)(f,2),y=g[0],v=g[1],N=Object(c.useState)([]),S=Object(d.a)(N,2),w=S[0],k=S[1],C=Object(c.useState)([]),B=Object(d.a)(C,2),T=B[0],R=B[1],A=n.a.useState(!1),D=Object(d.a)(A,2),z=D[0],E=D[1],F=Object(c.useState)(!1),W=Object(d.a)(F,2),L=W[0],q=W[1],G=n.a.useState(!1),V=Object(d.a)(G,2),U=(V[0],V[1],n.a.useState(!1)),K=Object(d.a)(U,2),J=(K[0],K[1]),Z=n.a.useState(!1),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)({}),ce=Object(d.a)(ae,2),ne=ce[0],re=ce[1],ie=Object(c.useState)([]),oe=Object(d.a)(ie,2),se=oe[0],ue=oe[1],Oe=Object(c.useState)([]),pe=Object(d.a)(Oe,2),he=pe[0],fe=pe[1],xe=Object(c.useState)([]),Ne=Object(d.a)(xe,2),Se=(Ne[0],Ne[1]),we=Object(c.useState)(!1),ke=Object(d.a)(we,2),Ce=ke[0],Ie=ke[1],Be=Object(c.useState)(!0),Te=Object(d.a)(Be,2),Re=Te[0],Ae=Te[1],Pe=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c},De=(Object(s.a)({},ee&&{bgcolor:ve.a[500],"&:hover":{bgcolor:ve.a[700]}}),function(){var t=Object(l.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(Y,"application-codesets/v2/BIOMETRIC_CAPTURE_FINGERS"),{headers:{Authorization:"Bearer ".concat(H)}});case 2:a=t.sent,O.a.get("".concat(Y,"biometrics/person/").concat(e.patientId),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(){var e=Object(l.a)(b.a.mark((function e(t){var c,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("patient bio",t.data),t.data.length>0?(ue(t.data),q(!0),c=Q.a.uniq(Q.a.map(t.data,"templateType")),Se(c),n=Q.a.map(a.data,(function(e){return Q.a.extend({},e,{captured:c.includes(e.display)})})),k(n)):(r=Q.a.map(a.data,(function(e){return Q.a.extend({},e,{captured:!1})})),k(r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(l.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Q.a.map(a.data,(function(e){return Q.a.extend({},e,{captured:!1})})),k(c),q(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),ze=function(){O.a.post("".concat(Y,"biometrics/store-list/").concat(e.patientId),e.patientId,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){console.log("cleared store")})).catch((function(e){console.log("cleared store error"),console.log(e)}))};Object(c.useEffect)((function(){ze(),De(),Ee()}),[]);var Ee=function(){O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){!0===e.data&&O.a.get("".concat(Y,"biometrics/devices?active=true"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){R(e.data.find((function(e){return!0===e.active}))),p(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){}))},Fe=function(t){var a;v(Object(s.a)(Object(s.a)({},y),{},(a={},Object(be.a)(a,t.target.name,t.target.value),Object(be.a)(a,"age",Pe(e.age)),a)))},Me=function(t){if(t.preventDefault(),he.length>=1){var a=he[he.length-1];console.log(Object(s.a)(Object(s.a)({},a),{},{recapture:!0})),a.capturedBiometricsList=Q.a.uniqBy(a.capturedBiometricsList,"templateType"),O.a.post("".concat(Y,"biometrics/templates"),a,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){console.log("saved",t),M.b.success("Biometric save successful",{position:M.b.POSITION.BOTTOM_CENTER}),fe([]),De(),e.updatePatientBiometricStatus(!0)})).catch((function(e){M.b.error("Something went wrong saving biometrics",{position:M.b.POSITION.BOTTOM_CENTER}),console.log(e)}))}else M.b.error("You can't save less than 2 finger",{position:M.b.POSITION.BOTTOM_CENTER})},_e=function(e){O.a.delete("".concat(Y,"biometrics?personId=").concat(e.patientId,"&templateType=").concat(e.templateType),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){console.log(t);var a=he.filter((function(t){return t.templateType!==e.templateType}));fe(a),M.b.info(e.templateType+"captured removed successfully!")})).catch((function(e){M.b.error("Something went wrong",{position:M.b.POSITION.BOTTOM_CENTER}),console.log(e)}))},We=function(e){return e>60&&e<=75?Object(X.jsx)(Le.a,{color:"warning",style:{fontSize:"12px"},children:e+"%"}):e>75?Object(X.jsx)(Le.a,{color:"success",style:{fontSize:"12px"},children:e+"%"}):Object(X.jsx)(Le.a,{color:"error",style:{fontSize:"12px"},children:e+"%"})};return Object(X.jsxs)("div",{className:t.root,children:[Object(X.jsxs)("div",{children:[r.includes("capture_patient_biometrics")||r.includes("all_permission")?Object(X.jsx)("div",{style:{flex:"10",padding:"5px",marginLeft:"5px",border:"1px solid rgba(99, 99, 99, 0.2)",boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px"},children:Object(X.jsxs)(le.a,{children:[Object(X.jsx)(M.a,{}),Object(X.jsx)(de.a,{md:3,children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"device",style:{color:"#014d88",fontWeight:"bold",fontSize:"14px"},children:[" ","Device"," "]}),Object(X.jsx)(me.a,{type:"select",name:"device",id:"device",value:y.device,required:!0,disabled:!0,children:u.map((function(e){var t=e.id,a=(e.name,e.active,e.url),c=e.type;return Object(X.jsx)("option",{value:a,children:c},t)}))}),""!==ne.device?Object(X.jsx)("span",{className:t.error,children:ne.device}):""]})}),Object(X.jsx)(de.a,{md:3,children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"device",style:{color:"#014d88",fontWeight:"bold",fontSize:"14px"},children:"Select Finger"}),Object(X.jsxs)(me.a,{type:"select",name:"templateType",id:"templateType",onChange:Fe,value:y.templateType,required:!0,children:[Object(X.jsx)("option",{value:"",children:"Select Finger "}),Q.a.filter(w,["captured",!1]).map((function(e){return Object(X.jsx)("option",{value:e.display,children:e.display},e.id)}))]}),""!==ne.templateType?Object(X.jsx)("span",{className:t.error,children:ne.templateType}):""]})}),Ce?Object(X.jsx)(de.a,{md:4,children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"device",style:{color:"#014d88",fontWeight:"bold",fontSize:"14px"},children:[" ","Reason for capture"," "]}),Object(X.jsx)(me.a,{type:"textarea",name:"reason",id:"reason",onChange:Fe})]})}):"",Object(X.jsx)(de.a,{md:2,children:Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",onClick:function(t){t.preventDefault(),function(){var e=Object(s.a)({},ne);return e.templateType=y.templateType?"":"This field is required",re(Object(s.a)({},e)),Object.values(e).every((function(e){return""===e}))}()&&(E(!0),console.log("",y),O.a.post("".concat(T.url,"?reader=").concat(T.name,"&isNew=").concat(Re),y,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){if(E(!1),"ERROR"===t.data.type)E(!1),J(!0),window.setTimeout((function(){J(!1)}),5e3),M.b.error(t.data.message.ERROR),Ae(!1);else if("SUCCESS"===t.data.type){t.data.imageQuality<=60&&Pe(e.age)<=6&&(M.b.info("Image quality captured is poor, Kindly give a reason for capture above.",{position:M.b.POSITION.BOTTOM_CENTER,autoClose:2e4}),Ie(!0));var a=t.data.templateType;J(!1),te(!0),window.setTimeout((function(){te(!1),E(!1)}),5e3);var c=t.data;c.capturedBiometricsList=Q.a.uniqBy(c.capturedBiometricsList,"templateType"),fe([].concat(Object(je.a)(he),[c])),Q.a.find(w,{display:a}).captured=!0,k(Object(je.a)(w)),v(Object(s.a)(Object(s.a)({},y),{},{templateType:""})),Ae(!1)}else E(!1),J(!0),M.b.error("Something went wrong capturing biometrics...",{position:M.b.POSITION.BOTTOM_CENTER})})).catch((function(e){E(!1)})))},className:"mt-4",style:{backgroundColor:"#992E62"},startIcon:Object(X.jsx)(ge.a,{}),disabled:z,children:"Capture Finger"})}),Object(X.jsx)("br",{})]})}):"",Object(X.jsx)(le.a,{children:he.length>=1?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(de.a,{md:12,style:{marginTop:"10px",paddingBottom:"20px"},children:Object(X.jsx)(ye.a,{celled:!0,horizontal:!0,children:he.map((function(e){return Object(X.jsxs)(ye.a.Item,{style:{width:"200px",height:"200px",border:"1px dotted #014d88",margin:"5px"},children:[Object(X.jsxs)(ye.a.Header,{style:{paddingLeft:"0px",height:"0.5rem",alignItems:"right"},children:[We(e.mainImageQuality),Object(X.jsxs)("span",{onClick:function(){_e(e)},children:[Object(X.jsx)(He.a,{name:"cancel",color:"red",style:{float:"right"}})," "]})]}),Object(X.jsxs)(ye.a.Content,{style:{width:"200px",height:"150px",display:"flex",justifyContent:"center",alignItems:"center"},children:[" ",Object(X.jsx)(ge.a,{style:{color:"#992E62",fontSize:150}})]}),Object(X.jsx)(ye.a.Content,{style:{width:"200px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"16px",color:"#014d88",fontWeight:"bold",fontFamily:'"poppins", sans-serif'},children:e.templateType}),Object(X.jsxs)(ye.a.Content,{children:[Object(X.jsx)("br",{}),e.mainImageQuality<75?Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){_e(e)},startIcon:Object(X.jsx)(qe.a,{}),children:"Reset recapture"}):" "]})]})}))})}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)(de.a,{md:12,children:se.length<10&&0!==se.length?Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",onClick:Me,startIcon:Object(X.jsx)(P.a,{}),children:"Save Capture"}):Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",disabled:he.length<6,onClick:Me,startIcon:Object(X.jsx)(P.a,{}),children:"Save Capture"})}),Object(X.jsx)("br",{})]}):""})]}),Object(X.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(X.jsx)("div",{className:"",style:{padding:"5px",flex:"10",boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",minHeight:"400px"},children:L&&se.length>0?Object(X.jsx)("div",{style:{display:"flex",width:"100%",flexWrap:"wrap"},children:se.map((function(t,a){return Object(X.jsx)("div",{style:{minHeight:"120px",padding:"5px",width:"20%"},children:Object(X.jsxs)("div",{className:"card ",style:{borderRadius:"6px"},children:[Object(X.jsxs)("div",{className:"card-header align-items-start",style:{backgroundColor:"#fff"},children:[Object(X.jsxs)("div",{children:[Object(X.jsx)("h6",{className:"fs-18 font-w500 mb-3 user-name",children:Object(X.jsx)(_.a,{to:"#",style:{color:"#014d88",fontSize:"14px",fontFamily:'"poppins",sans-serif'},children:t.templateType})}),Object(X.jsxs)("div",{className:"fs-9 text-nowrap",style:{fontSize:"10px",color:"#992E62",fontWeight:"bold",fontFamily:'"poppins",sans-serif'},children:[Object(X.jsx)("i",{className:"fa fa-calendar-o me-3","aria-hidden":"true"}),I()(t.lastModifiedDate).format("YYYY-MM-DD HH:mm")]})]}),Object(X.jsxs)(Ge.a,{className:"dropdown ms-auto",children:[Object(X.jsx)(Ge.a.Toggle,{as:"button",variant:"",drop:"up",className:"btn sharp btn-primary ",id:"tp-btn",style:{backgroundColor:"#014d88",borderColor:"#014d88",borderRadius:"5px",marginRight:"-18px",marginTop:"-10px"},children:Object(X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"18px",height:"18px",viewBox:"0 0 24 24",version:"1.1",children:Object(X.jsxs)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[Object(X.jsx)("rect",{x:"0",y:"0",width:"24",height:"24"}),Object(X.jsx)("circle",{fill:"#ffffff",cx:"12",cy:"5",r:"2"}),Object(X.jsx)("circle",{fill:"#ffffff",cx:"12",cy:"12",r:"2"}),Object(X.jsx)("circle",{fill:"#ffffff",cx:"12",cy:"19",r:"2"})]})})}),Object(X.jsx)(Ge.a.Menu,{alignRight:!0,className:"dropdown-menu-right",children:Object(X.jsxs)(Ge.a.Item,{style:{color:"red"},onClick:function(){return a=t.id,c=t.templateType,void O.a.delete("".concat(Y,"biometrics/").concat(a),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){M.b.success("".concat(c," deleted successfully"),{position:M.b.POSITION.BOTTOM_CENTER}),Q.a.find(w,{display:c}).captured=!1,k(Object(je.a)(w));var a=Q.a.reject(se,{templateType:c});ue(a),ze(),0===a.length&&e.updatePatientBiometricStatus(!1)})).catch((function(e){M.b.error("Something went wrong",{position:M.b.POSITION.BOTTOM_CENTER}),console.log(e)}));var a,c},children:[Object(X.jsx)(Xe.a,{})," Delete"]})})]})]}),Object(X.jsx)("div",{className:"card-body p-0 pb-2",children:Object(X.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(X.jsx)("li",{className:"list-group-item",style:{height:"100px",display:"flex",justifyContent:"center"},children:Object(X.jsx)("img",{src:Ue,alt:"",style:{height:"80px"}})}),Object(X.jsxs)("li",{className:"list-group-item",children:[Object(X.jsxs)(Le.a,{variant:"info badge-xs light",className:"card-link float-end",children:[null!==t.imageQuality?t.imageQuality+"%":"N/A"," "]}),Object(X.jsxs)("span",{className:"mb-0 title",children:["Status ",t.iso]})," ",":",Object(X.jsx)("span",{className:"text-black desc-text ms-2",children:Object(X.jsxs)(Le.a,{variant:!0===t.iso?"primary badge-xs":"danger badge-xs",children:[Object(X.jsx)("i",{className:"fa fa-check-square me-2 scale4","aria-hidden":"true"})," "]})})]})]})})]})},a)}))}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{className:"flex-grow-8",children:Object(X.jsx)("div",{className:"flex-grow-8",children:Object(X.jsx)(Ve.a,{severity:"info",children:Object(X.jsx)(Qe.a,{style:{height:"400px"},children:Object(X.jsx)("strong",{children:"No biometrics captured"})})})})})})}),(r.includes("capture_patient_biometrics")||r.includes("all_permission"),"")]})]})},$e=a(326),et=a.n($e),tt=(a(663),a(1074)),at=a(1075),ct=a(692);Me.a,We.a,Object(B.a)((function(e){return{root:{width:"100%",marginBottom:20,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},checkinModal:{"& .modal-dialog":{maxWidth:"1000px"},"& .ui.label":{backgroundColor:"#fff",fontSize:"16px",color:"#014d88",fontWeight:"bold",textAlign:"left"},"& .card-title":{color:"#fff",fontWeight:"bold"},"& .form-control":{borderRadius:"0.25rem",height:"41px"},"& .card-header:first-child":{borderRadius:"calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0"},"& .dropdown-toggle::after":{display:" block !important"},"& select":{"-webkit-appearance":"listbox !important"},"& p":{color:"red"},"& label":{fontSize:"14px",color:"#014d88",fontWeight:"bold"}},checkInDatePicker:{"& .MuiFormControl-root.MuiTextField-root":{border:"1px solid #eee"}}}})),new Date;var nt=Object(ne.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}}))((function(e){var t=e.classes,a=e.patientObj?e.patientObj:{},n=(e.permissions&&e.permissions,Object(c.useState)(!1)),r=Object(d.a)(n,2),i=(r[0],r[1],Object(c.useState)(e.patientBiometricStatus)),o=Object(d.a)(i,2),s=o[0],l=o[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),u=b[0],p=b[1],h=Object(c.useState)([]),f=Object(d.a)(h,2),m=(f[0],f[1]);Object(c.useEffect)((function(){l(e.patientBiometricStatus),g()}),[e.patientBiometricStatus]);var x,g=function(){O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){p(e.data),!0===e.data&&O.a.get("".concat(Y,"biometrics/devices"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){m(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){}))};return Object(X.jsx)("div",{className:t.root,children:Object(X.jsxs)(re.a,{defaultExpanded:!0,children:[Object(X.jsx)(ie.a,{children:Object(X.jsx)(le.a,{children:Object(X.jsx)(de.a,{md:11,children:Object(X.jsxs)(le.a,{className:"mt-1",children:[Object(X.jsx)(de.a,{md:12,className:t.root2,children:Object(X.jsx)("b",{style:{fontSize:"25px",color:"rgb(153, 46, 98)"},children:a.surname+", "+a.firstName})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Hospital Number :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""}(a.identifier)})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:["Date Of Birth :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:a.dateOfBirth})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Age :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"}(a.dateOfBirth)})]})}),Object(X.jsx)(de.a,{md:4,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Sex :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA",fontFamily:"'poppins', sans-serif",fontWeight:"bolder"},children:a.sex})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Phone Number :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t,a=null===e||void 0===e||null===(t=e.contactPoint)||void 0===t?void 0:t.find((function(e){return"phone"==e.type}));return a?a.value:""}(null===a||void 0===a?void 0:a.contactPoint)})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Address :"," ",Object(X.jsxs)("b",{style:{color:"#0B72AA"},children:[(x=a.address,x&&x.address&&x.address.length>0?"".concat(x.address[0].line[0],", ").concat(x.address[0].city):null)," "]})]})})]})})})}),Object(X.jsx)(oe.a,{className:t.details,children:!0===u?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{children:Object(X.jsx)(se.a,{variant:"caption",children:Object(X.jsxs)(ce.a,{style:{height:"30px",fontSize:"14px"},color:!0===s?"green":"red",size:"large",children:["Biometrics"," ",!0===s?"Captured":"Not Captured"]})})})}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{children:Object(X.jsx)(se.a,{variant:"caption",children:Object(X.jsx)(ce.a,{color:"red",style:{height:"30px",fontSize:"14px"},children:"Biometrics Module Not Install"})})})})})]})})})),rt=Object(B.a)((function(e){return{root:{width:"100%",marginBottom:20,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},checkinModal:{"& .modal-dialog":{maxWidth:"1000px"},"& .ui.label":{backgroundColor:"#fff",fontSize:"16px",color:"#014d88",fontWeight:"bold",textAlign:"left"},"& .card-title":{color:"#fff",fontWeight:"bold"},"& .form-control":{borderRadius:"0.25rem",height:"41px"},"& .card-header:first-child":{borderRadius:"calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0"},"& .dropdown-toggle::after":{display:" block !important"},"& select":{"-webkit-appearance":"listbox !important"},"& p":{color:"red"},"& label":{fontSize:"14px",color:"#014d88",fontWeight:"bold"}},checkInDatePicker:{"& .MuiFormControl-root.MuiTextField-root":{border:"1px solid #eee"}}}})),it=new Date;var ot=function(e){e.location&&e.location.state&&e.location.state.user;var t=Object(c.useState)(""),a=Object(d.a)(t,2),n=(a[0],a[1],Object(o.g)()),r=rt(),i=Object(c.useState)(new Date),j=Object(d.a)(i,2),u=j[0],f=j[1],m=Object(c.useState)(new Date),x=Object(d.a)(m,2),g=x[0],y=x[1],v=Object(c.useState)((new Date).toISOString().substr(0,10).replace("T"," ")),N=Object(d.a)(v,2),S=(N[0],N[1],n.location&&n.location.state?n.location.state.patientObj:{}),w=n.location&&n.location.state?n.location.state.permissions:[],k=Object(L.d)(),C=(k.handleSubmit,k.control,Object(c.useState)(!1)),B=Object(d.a)(C,2),T=B[0],R=B[1],A=Object(c.useState)(null),P=Object(d.a)(A,2),D=P[0],z=P[1],E=Object(c.useState)(!1),F=Object(d.a)(E,2),q=F[0],G=F[1],V=Object(c.useState)(!1),U=Object(d.a)(V,2),K=U[0],J=U[1],Z=Object(c.useState)([]),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)({selected:[]}),ne=Object(d.a)(ae,2),re=ne[0],ie=ne[1],oe=Object(c.useState)([]),se=Object(d.a)(oe,2),le=se[0],de=se[1],je=Object(c.useState)(S.biometricStatus),be=Object(d.a)(je,2),ue=(be[0],be[1],Object(c.useState)(!1)),Oe=Object(d.a)(ue,2),me=(Oe[0],Oe[1],Object(c.useState)({personId:"",visitStartDate:Object(p.a)(new Date(it),"yyyy-MM-dd hh:mm")})),xe=Object(d.a)(me,2),ge=(xe[0],xe[1],Object(c.useState)({serviceIds:"",visitDto:{personId:S.id,checkInDate:Object(p.a)(new Date(it),"yyyy-MM-dd hh:mm")}})),ye=Object(d.a)(ge,2),ve=ye[0],Ne=(ye[1],Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"patient/post-service"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,z(t.data),te(Object.entries(t.data).map((function(e){var t=Object(d.a)(e,2),a=(t[0],t[1]);return{label:a.moduleServiceName,value:a.moduleServiceCode}}))),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred fetching services!"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[])),Se=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"patient/visit/visit-by-patient/").concat(S.id),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,de(t.data),t.data.map((function(e){null===e.checkOutDate&&G(!0)})),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred fetching services!"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]);ee&&ee.length>0&&ee.map((function(e,t){return Object(X.jsx)(Ie.a,{value:e.moduleServiceCode,children:e.moduleServiceName},e.moduleServiceCode)}));var ke=function(){R(!1)},Be=function(){J(!1)},Te=[];return Object(c.useEffect)((function(){Ne(),Se()}),[Ne,Se]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"mb-3 col-md-3",children:"\xa0"}),Object(X.jsx)("div",{className:"mb-3 col-md-3",children:"\xa0"}),Object(X.jsx)("div",{className:"mb-3 col-md-3",children:"\xa0"}),Object(X.jsxs)("div",{className:"mb-3 col-md-3",children:[Object(X.jsx)(_.a,{to:"/",children:Object(X.jsx)(h.a,{className:" float-right mr-1",variant:"contained",floated:"left",startIcon:Object(X.jsx)(W.a,{}),style:{backgroundColor:"rgb(153, 46, 98)",color:"#fff",height:"35px"},children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Back"})})}),w.includes("patient_check_in")||w.includes("all_permission")?Object(X.jsx)(X.Fragment,{children:!1===q?Object(X.jsx)(Re.a,{variant:"contained",style:{backgroundColor:"rgb(4, 196, 217)",fontSize:"14PX",fontWeight:"bold",height:"35px"},onClick:function(){R(!0)},className:" float-right mr-1",children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"CheckIn"})}):""}):"",!0===q?Object(X.jsx)(Re.a,{variant:"contained",style:{backgroundColor:"green",fontSize:"14PX",fontWeight:"bold",height:"35px"},onClick:function(){J(!0)},className:" float-right mr-1",children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Check Out"})}):""]})]}),Object(X.jsxs)(pe.a,{size:"lg",style:{maxWidth:"900px"},isOpen:T,toggle:ke,className:r.checkinModal,children:[Object(X.jsx)(he.a,{toggle:ke,children:Object(X.jsx)("h5",{style:{fontWeight:"bold",fontSize:"30px",color:"#992E62"},children:"Select Check-In Service"})}),Object(X.jsx)(fe.a,{children:Object(X.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=I()(u,"yyyy-MM-DD hh:mm").format("yyyy-MM-DD H:mm");re.selected.length>0&&I()(t).isValid()?(re.selected.length>0&&re.selected.map((function(e){Te.push(Q.a.find(D,{moduleServiceCode:e}).id)})),ve.serviceIds=Te,ve.visitDto.checkInDate=I()(u,"yyyy-MM-DD hh:mm").format("yyyy-MM-DD HH:mm"),O.a.post("".concat(Y,"patient/visit/checkin"),ve,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){console.log("checkIn",e),M.b.success("Patient Check-In successful"),G(!0),ke(),Se()})).catch((function(e){console.log(e),M.b.error("Something went wrong"),ke()}))):M.b.error("Kindly check the form for a valid date and selected services")},children:Object(X.jsxs)(Ae.a,{style:{display:"grid",gridRowGap:"20px",padding:"20px",margin:"10px 10px"},children:[Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(we.a,{style:{width:"100%"},className:r.checkInDatePicker,children:Object(X.jsxs)(ct.a,{dateAdapter:at.a,children:[Object(X.jsx)(ce.a,{for:"post-services",style:{color:"#014d88",fontWeight:"bolder",fontSize:"18px"},children:"Check-In Date *"}),Object(X.jsx)(tt.a,{renderInput:function(e){return Object(X.jsx)(De.a,Object(s.a)(Object(s.a)({},e),{},{sx:{input:{fontSize:"14px"}},fullWidth:!0}))},value:u,onChange:function(e){f(e)},maxDate:new Date,maxTime:new Date,style:{width:"100%"}})]})})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsxs)(we.a,{children:[Object(X.jsx)(ce.a,{for:"post-services",style:{color:"#014d88",fontWeight:"bolder",fontSize:"18px"},children:Object(X.jsx)("h5",{style:{fontWeight:"bold",fontSize:"30px",color:"#992E62"},children:"Check-In Service *"})}),Object(X.jsx)(et.a,{options:ee,onChange:function(e){ie({selected:e})},selected:re.selected})]})})]}),Object(X.jsx)(Pe.a,{container:!0,spacing:2,children:Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(Re.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})})})]})})})]}),Object(X.jsxs)(pe.a,{isOpen:K,toggle:Be,className:r.checkinModal,style:{maxWidth:"900px",height:"800px"},children:[Object(X.jsx)(he.a,{toggle:Be,children:Object(X.jsxs)("h5",{style:{fontWeight:"bold",fontSize:"30px",color:"#014d88"},children:["Check Out"," "]})}),Object(X.jsx)(fe.a,{children:Object(X.jsx)("form",{children:Object(X.jsxs)(Ae.a,{style:{display:"grid",gridRowGap:"20px",padding:"20px",margin:"10px 10px"},children:[Object(X.jsxs)(Pe.a,{container:!0,spacing:2,children:[Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)("h5",{style:{color:"#992E62",fontSize:"20px",fontWeight:"bold"},children:"Are you sure you want to check-out patient?"})}),Object(X.jsx)(Pe.a,{item:!0,xs:12,children:Object(X.jsx)(we.a,{style:{width:"100%"},className:r.checkInDatePicker,children:Object(X.jsxs)(ct.a,{dateAdapter:at.a,children:[Object(X.jsx)(ce.a,{for:"post-services",style:{color:"#014d88",fontWeight:"bolder",fontSize:"16px"},children:"Check-Out Date *"}),Object(X.jsx)(tt.a,{renderInput:function(e){return Object(X.jsx)(De.a,Object(s.a)(Object(s.a)({},e),{},{sx:{input:{fontSize:"14px"}},fullWidth:!0}))},value:g,onChange:function(e){y(e)},maxDate:new Date,maxTime:new Date,style:{width:"100%"}})]})})})]}),Object(X.jsx)(Pe.a,{container:!0,spacing:2,children:Object(X.jsxs)(Pe.a,{item:!0,xs:12,children:[Object(X.jsx)(Re.a,{type:"submit",onClick:function(e){e.preventDefault();var t=le.find((function(e){return"PENDING"===e.status}));O.a.put("".concat(Y,"patient/visit/checkout/").concat(t.id),t.id,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){M.b.success("Record save successful"),G(!1),Be(),Se()})).catch((function(e){console.log(e),M.b.error("Something went wrong"),Be()}))},variant:"contained",color:"primary",children:"Yes"}),Object(X.jsx)(Re.a,{onClick:Be,variant:"contained",style:{backgroundColor:"#992E62",color:"#fff",marginLeft:"10px"},children:"Cancel"})]})})]})})})]})]})},st=Object(B.a)((function(e){return{root:{width:"100%",marginBottom:20,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},checkinModal:{"& .modal-dialog":{maxWidth:"1000px"},"& .ui.label":{backgroundColor:"#fff",fontSize:"16px",color:"#014d88",fontWeight:"bold",textAlign:"left"},"& .card-title":{color:"#fff",fontWeight:"bold"},"& .form-control":{borderRadius:"0.25rem",height:"41px"},"& .card-header:first-child":{borderRadius:"calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0"},"& .dropdown-toggle::after":{display:" block !important"},"& select":{"-webkit-appearance":"listbox !important"},"& p":{color:"red"},"& label":{fontSize:"14px",color:"#014d88",fontWeight:"bold"}},checkInDatePicker:{"& .MuiFormControl-root.MuiTextField-root":{border:"1px solid #eee"}}}}));var lt=function(e){e.location&&e.location.state&&e.location.state.user;var t=Object(c.useState)(""),a=Object(d.a)(t,2),n=a[0],r=(a[1],Object(o.g)()),i=st(),s=r.location&&r.location.state?r.location.state.patientObj:{};console.log("client  dashboard",s);var j=r.location&&r.location.state?r.location.state.permissions:[],u=Object(c.useState)(s.biometricStatus),p=Object(d.a)(u,2),h=(p[0],p[1]),f=Object(c.useState)(!1),m=Object(d.a)(f,2),x=m[0],g=m[1],y=Object(c.useState)([]),v=Object(d.a)(y,2),N=v[0],S=v[1],w=Object(c.useState)(!1),k=Object(d.a)(w,2),C=(k[0],k[1]),B=function(e){h(e)},T=[{menuItem:"Visits",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)(Ee.a,{title:"",columns:[{title:"Check-In Date",field:"checkInDate",filtering:!1,headerStyle:{backgroundColor:"#039be5",border:"2px solid #fff",paddingRight:"30px"}},{title:"Check-Out Date",field:"checkOutDate",filtering:!1},{title:"Service",field:"service",filtering:!1},{title:"Status",field:"status",filtering:!1}],isLoading:n,data:N.map((function(e){return{checkInDate:I()(e.checkInDate).format("YYYY-MM-DD h:mm a"),checkOutDate:e.checkOutDate?I()(e.checkOutDate).format("YYYY-MM-DD h:mm a"):"Visit Ongoing",service:e.service,status:Object(X.jsx)("h6",{style:{color:"COMPLETED"===e.status?"green":"red"},children:e.status})}})),options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bold"},rowStyle:{color:"rgba(0,0,0,.87)",fontFamily:"'poppins', sans-serif"},searchFieldStyle:{width:"200%",margingLeft:"250px"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400}})})}},{menuItem:j.includes("view_patient_appointment")&&x||j.includes("all_permission")&&x?"Biometrics":"",render:function(){return j.includes("view_patient_appointment")||j.includes("all_permission")?Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)("div",{style:{minHeight:400,width:"100%"},children:Object(X.jsx)(Ze,{age:s.dateOfBirth,patientId:s.id,updatePatientBiometricStatus:B})})}):""}}],R=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"patient/visit/visit-by-patient/").concat(s.id),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,S(t.data),t.data.map((function(e){null===e.checkOutDate&&C(!0)})),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred fetching services!"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]);return Object(c.useEffect)((function(){R(),O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){!0===e.data&&g(!0)})).catch((function(e){}))}),[]),Object(X.jsxs)("div",{className:i.root,children:[Object(X.jsx)("div",{className:"mb-6 col-md-6",style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(X.jsxs)(U.a,{"aria-label":"breadcrumb",children:[Object(X.jsx)(K.a,{style:{color:"#992E62"},children:"Patient"}),Object(X.jsx)(K.a,{style:{color:"#014d88"},children:"Dashboard"})]})}),Object(X.jsx)(Be.a,{children:Object(X.jsxs)(Te.a,{children:[Object(X.jsx)(nt,{patientObj:s,permissions:j,patientBiometricStatus:s.biometricStatus}),Object(X.jsx)(Be.a,{style:{marginTop:"5px"},children:Object(X.jsxs)(Te.a,{children:[Object(X.jsx)(ot,{props:e}),Object(X.jsx)(Se.a,{panes:T})]})})]})})]})};var dt=Object(ne.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}}))((function(e){var t=e.classes,a=e.patientObj?e.patientObj:{},n=(e.permissions&&e.permissions,Object(c.useState)(!1)),r=Object(d.a)(n,2),i=(r[0],r[1],Object(c.useState)(!0)),o=Object(d.a)(i,2),s=o[0],l=(o[1],Object(c.useState)(!0)),j=Object(d.a)(l,2),b=j[0],u=j[1],p=Object(c.useState)([]),h=Object(d.a)(p,2),f=(h[0],h[1]);Object(c.useEffect)((function(){x()}),[]);var m,x=function(){O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){u(e.data),!0===e.data&&O.a.get("".concat(Y,"biometrics/devices"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){f(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){}))};return Object(X.jsx)("div",{className:t.root,children:Object(X.jsxs)(re.a,{defaultExpanded:!0,children:[Object(X.jsx)(ie.a,{children:Object(X.jsx)(le.a,{children:Object(X.jsx)(de.a,{md:11,children:Object(X.jsxs)(le.a,{className:"mt-1",children:[Object(X.jsx)(de.a,{md:12,className:t.root2,children:Object(X.jsx)("b",{style:{fontSize:"25px",color:"rgb(153, 46, 98)"},children:a.surname+", "+a.firstName})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Hospital Number :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""}(a.identifier)})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:["Date Of Birth :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:a.dateOfBirth})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Age :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"}(a.dateOfBirth)})]})}),Object(X.jsx)(de.a,{md:4,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Sex :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA",fontFamily:"'poppins', sans-serif",fontWeight:"bolder"},children:a.sex})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Phone Number :"," ",Object(X.jsx)("b",{style:{color:"#0B72AA"},children:function(e){var t;console.log("contact",e);var a=null===e||void 0===e||null===(t=e.contactPoint)||void 0===t?void 0:t.find((function(e){return"phone"==e.type}));return a?a.value:""}(null===a||void 0===a?void 0:a.contactPoint)})]})}),Object(X.jsx)(de.a,{md:4,className:t.root2,style:{marginTop:"10px"},children:Object(X.jsxs)("span",{style:{color:"#000"},children:[" ","Address :"," ",Object(X.jsxs)("b",{style:{color:"#0B72AA"},children:[(m=a.address,m&&m.address&&m.address.length>0?"".concat(m.address[0].line[0],", ").concat(m.address[0].city):null)," "]})]})})]})})})}),Object(X.jsx)(oe.a,{className:t.details,children:!0===b?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{children:Object(X.jsx)(se.a,{variant:"caption",children:Object(X.jsxs)(ce.a,{style:{height:"30px",fontSize:"14px"},color:!0===s?"green":"red",size:"large",children:["Biometrics"," ",!0===s?"Captured":"Not Captured"]})})})}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{children:Object(X.jsx)(se.a,{variant:"caption",children:Object(X.jsx)(ce.a,{color:"red",style:{height:"30px",fontSize:"14px"},children:"Biometrics Module Not Install"})})})})})]})})})),jt=a(1102);Object(B.a)((function(e){return{root:{width:"100%","& .dropdown-toggle::after, .dropleft .dropdown-toggle::before, .dropright .dropdown-toggle::before, .dropup .dropdown-toggle::after":{fontFamily:"FontAwesome",border:"0",verticalAlign:"middle",marginLeft:".25em",lineHeight:"1"},"& .dropdown-menu .dropdown-item":{fontSize:"14px",color:"#014d88",padding:"0.3rem 1.5rem",fontWeight:"bold"},"& .mt-4":{marginTop:"28px !important"},"& .form-control":{color:"#992E62"},"& .form-control:focus":{color:"#014d88"},"& .sharp ":{"min-width":"35px",padding:"5px",height:"35px","min-height":"35px"}},card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"}}}));var bt=a(1103),ut=a(1069),Ot=a(1063),pt=a(1088),ht=a(1089),ft=a(86),mt=a(1068),xt=["Delete","Edit"];function gt(e){var t=c.useState(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],i=Object(c.useRef)(null),o=c.useState(1),l=Object(d.a)(o,2),j=l[0],b=(l[1],function(){r(!1)});return Object(X.jsxs)(c.Fragment,{children:[Object(X.jsxs)(bt.a,{variant:"contained",ref:i,style:{backgroundColor:"rgb(153, 46, 98)",height:"30px",width:"150px"},children:[Object(X.jsx)(_.a,{to:e.actions[0].to,style:{borderRight:"20px solid #fff !important"},children:Object(X.jsx)(Re.a,{size:"small",onClick:function(){console.info("You clicked ".concat(xt[j]))},variant:"contained",startIcon:e.actions[0].icon,style:{backgroundColor:"rgb(153, 46, 98)"},children:Object(X.jsx)(K.a,{variant:"h7",style:{fontWeight:"bolder"},children:e.actions[0].name})})}),Object(X.jsx)(mt.a,{orientation:"vertical",flexItem:!0,style:{borderRight:"20px solid #fff !important",backgroundColor:"#fff",width:"1px",height:"26px",marginTop:"2px"},children:"1"}),Object(X.jsx)(Re.a,{size:"medium","aria-controls":n?"split-button-menu":void 0,"aria-expanded":n?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:function(){r((function(e){return!e}))},style:{backgroundColor:"rgb(153, 46, 98)"},children:Object(X.jsx)(ft.a,{size:"24"})})]}),Object(X.jsx)(pt.a,{open:n,anchorEl:i.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:"10000"},children:function(t){var a=t.TransitionProps,c=t.placement;return Object(X.jsx)(Ot.a,Object(s.a)(Object(s.a)({},a),{},{style:{transformOrigin:"bottom"===c?"center top":"center bottom",zIndex:"1000"},children:Object(X.jsx)(Ae.a,{sx:{minWidth:"130px",maxWidth:"150px",marginTop:"2px",zIndex:"1000"},children:Object(X.jsx)(ut.a,{onClickAway:b,children:Object(X.jsx)(ht.a,{id:"split-button-menu",autoFocusItem:!0,children:e.actions.slice(1).map((function(e,t){return Object(X.jsx)(Ie.a,{children:Object(X.jsxs)(_.a,{to:e.to,onClick:e.deleteAction,children:[e.icon,Object(X.jsx)("span",{style:{color:"rgb(153, 46, 98)",fontWeight:"bolder",fontSize:"12px"},children:e.name})]})},Math.random())}))})})})}))}})]})}var yt=a(1071),vt=a(1070),Nt=function(e){var t;return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(pe.a,{isOpen:e.modal,toggle:e.toggle,style:{display:"flex",maxWidth:"85%",maxHeight:"80%"},fullscreen:"true",children:[Object(X.jsx)(he.a,{toggle:e.toggle,children:0===(null===(t=e.storedBiometrics[0])||void 0===t?void 0:t.recapture)?"Baseline Fingerprints":"Previous Recaptured Fingerprints"}),Object(X.jsx)(fe.a,{children:Object(X.jsx)("div",{children:Object(X.jsx)("div",{className:"",style:{padding:"5px",flex:"10",boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",minHeight:"400px"},children:e.storedBiometrics.length>0?Object(X.jsx)("div",{style:{display:"flex",width:"100%",flexWrap:"wrap"},children:e.storedBiometrics.map((function(e,t){return Object(X.jsx)("div",{style:{minHeight:"120px",padding:"5px",width:"20%"},children:Object(X.jsxs)("div",{className:"card ",style:{borderRadius:"6px"},children:[Object(X.jsx)("div",{className:"card-header align-items-start",style:{backgroundColor:"#fff"},children:Object(X.jsxs)("div",{children:[Object(X.jsx)("h6",{className:"fs-18 font-w500 mb-3 user-name",children:Object(X.jsx)(_.a,{to:"#",style:{color:"#014d88",fontSize:"14px",fontFamily:'"poppins",sans-serif'},children:e.templateType})}),Object(X.jsxs)("div",{className:"fs-9 text-nowrap",style:{fontSize:"10px",color:"#992E62",fontWeight:"bold",fontFamily:'"poppins",sans-serif'},children:[Object(X.jsx)("i",{className:"fa fa-calendar-o me-3","aria-hidden":"true"}),I()(e.lastModifiedDate).format("YYYY-MM-DD HH:mm")]})]})}),Object(X.jsx)("div",{className:"card-body p-0 pb-2",children:Object(X.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(X.jsx)("li",{className:"list-group-item",style:{height:"100px",display:"flex",justifyContent:"center"},children:Object(X.jsx)("img",{src:Ue,alt:"",style:{height:"80px"}})}),Object(X.jsxs)("li",{className:"list-group-item",children:[Object(X.jsxs)(vt.a,{variant:"info badge-xs light",className:"card-link float-end",children:[null!==e.imageQuality?e.imageQuality+"%":"N/A"," "]}),Object(X.jsxs)("span",{className:"mb-0 title",children:["Fingerprint Quality ",e.iso]})," ",":"]})]})})]})},t)}))}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{className:"flex-grow-8",children:Object(X.jsx)("div",{className:"flex-grow-8",children:Object(X.jsx)(Ve.a,{severity:"info",children:Object(X.jsx)(Qe.a,{style:{height:"400px"},children:Object(X.jsx)("strong",{children:"No biometrics captured"})})})})})})})})}),Object(X.jsx)(yt.a,{})]})})},St=Object(B.a)((function(e){return{root:{width:"100%","& .dropdown-toggle::after, .dropleft .dropdown-toggle::before, .dropright .dropdown-toggle::before, .dropup .dropdown-toggle::after":{fontFamily:"FontAwesome",border:"0",verticalAlign:"middle",marginLeft:".25em",lineHeight:"1"},"& .dropdown-menu .dropdown-item":{fontSize:"14px",color:"#014d88",padding:"0.3rem 1.5rem",fontWeight:"bold"},"& .mt-4":{marginTop:"28px !important"},"& .form-control":{color:"#992E62"},"& .form-control:focus":{color:"#014d88"},"& .sharp ":{"min-width":"35px",padding:"5px",height:"35px","min-height":"35px"}},card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"}}})),wt=function(e){var t=St(),a=Object(o.g)(),r=a.location&&a.location.state?a.location.state.permissions:[],i=Object(c.useState)([]),j=Object(d.a)(i,2),u=j[0],p=j[1],f=Object(c.useState)({biometricType:"FINGERPRINT",patientId:e.patientId,templateType:"",device:"SECUGEN",reason:"",age:""}),g=Object(d.a)(f,2),y=g[0],v=g[1],N=Object(c.useState)([]),S=Object(d.a)(N,2),w=S[0],k=S[1],C=Object(c.useState)([]),I=Object(d.a)(C,2),B=I[0],T=I[1],R=n.a.useState(!1),A=Object(d.a)(R,2),D=A[0],z=A[1],E=Object(c.useState)(!1),F=Object(d.a)(E,2),_=(F[0],F[1]),W=n.a.useState(!1),L=Object(d.a)(W,2),q=(L[0],L[1],n.a.useState(!1)),G=Object(d.a)(q,2),V=(G[0],G[1]),U=n.a.useState(!1),K=Object(d.a)(U,2),J=(K[0],K[1]),Z=Object(c.useState)({}),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)([]),ce=Object(d.a)(ae,2),ne=(ce[0],ce[1]),re=Object(c.useState)([]),ie=Object(d.a)(re,2),oe=ie[0],se=ie[1],ue=Object(c.useState)([]),Oe=Object(d.a)(ue,2),fe=(Oe[0],Oe[1],Object(c.useState)([])),xe=Object(d.a)(fe,2),ve=xe[0],Se=xe[1],we=Object(c.useState)([]),ke=Object(d.a)(we,2),Ce=(ke[0],ke[1],Object(c.useState)(!1)),Ie=Object(d.a)(Ce,2),Be=Ie[0],Te=Ie[1],Re=Object(c.useState)(!0),Ae=Object(d.a)(Re,2),Pe=Ae[0],De=Ae[1],ze=function(e){console.log(e);var t=new Date,a=(e.split("-"),new Date(e));return t.getFullYear()-a.getFullYear()},Ee=function(){var t=Object(l.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(Y,"application-codesets/v2/BIOMETRIC_CAPTURE_FINGERS"),{headers:{Authorization:"Bearer ".concat(H)}});case 2:a=t.sent,O.a.get("".concat(Y,"biometrics/person/").concat(e.patientId),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(){var e=Object(l.a)(b.a.mark((function e(t){var c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.length>0?(ne(t.data),_(!0),Q.a.uniq(Q.a.map(t.data,"templateType")),c=Q.a.map(a.data,(function(e){return Q.a.extend({},e,{captured:!1})})),k(c)):(n=Q.a.map(a.data,(function(e){return Q.a.extend({},e,{captured:!1})})),k(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(l.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("getPersonBiometrics error"),console.log(t),c=Q.a.map(a.data,(function(e){return Q.a.extend({},e,{captured:!1})})),k(c),_(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){O.a.post("".concat(Y,"biometrics/store-list/").concat(e.patientId),e.patientId,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){})).catch((function(e){console.log(e)})),Ee(),Fe(),O.a.get("".concat(Y,"biometrics/grouped/person/").concat(e.patientId),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){Se(e.data)}))}),[]);var Fe=function(){O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){!0===e.data&&O.a.get("".concat(Y,"biometrics/devices?active=true"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){T(e.data.find((function(e){return!0===e.active}))),p(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){}))},Me=function(t){var a;v(Object(s.a)(Object(s.a)({},y),{},(a={},Object(be.a)(a,t.target.name,t.target.value),Object(be.a)(a,"age",ze(e.age)),a)))},_e=function(e){O.a.delete("".concat(Y,"biometrics?personId=").concat(e.patientId,"&templateType=").concat(e.templateType),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){Q.a.find(w,{display:e.templateType}).captured=!1,k(Object(je.a)(w));var a=oe.filter((function(t){return t.templateType!==e.templateType}));se(a),M.b.info(e.templateType+" captured removed successfully!")})).catch((function(e){M.b.error("Something went wrong",{position:M.b.POSITION.BOTTOM_CENTER}),console.log(e)}))},We=function(e){return e>60&&e<=75?Object(X.jsx)(Le.a,{color:"warning",style:{fontSize:"12px"},children:e+"%"}):e>75?Object(X.jsx)(Le.a,{color:"success",style:{fontSize:"12px"},children:e+"%"}):Object(X.jsx)(Le.a,{color:"error",style:{fontSize:"12px"},children:e+"%"})};return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(pe.a,{isOpen:e.modal,toggle:e.toggle,style:{display:"flex",maxWidth:"100%",maxHeight:"100%"},fullscreen:"true",children:[Object(X.jsx)(he.a,{toggle:e.toggle,children:"Recapture Fingerprints"}),Object(X.jsx)(yt.a,{children:Object(X.jsx)("div",{className:t.root,children:Object(X.jsxs)("div",{children:[r.includes("capture_patient_biometrics")||r.includes("all_permission")?Object(X.jsx)("div",{style:{flex:"10",padding:"5px",marginLeft:"5px",border:"1px solid rgba(99, 99, 99, 0.2)",boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px"},children:Object(X.jsxs)(le.a,{children:[Object(X.jsxs)("p",{children:[" ","Patient recapture count :"," ",Object(X.jsx)("b",{children:ve.length-1})]}),Object(X.jsx)(M.a,{}),Object(X.jsx)(de.a,{md:3,children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"device",style:{color:"#014d88",fontWeight:"bold",fontSize:"14px"},children:[" ","Device"," "]}),Object(X.jsx)(me.a,{type:"select",name:"device",id:"device",value:y.device,required:!0,disabled:!0,children:u.map((function(e){var t=e.id,a=(e.name,e.active,e.url),c=e.type;return Object(X.jsx)("option",{value:a,children:c},t)}))}),""!==ee.device?Object(X.jsx)("span",{className:t.error,children:ee.device}):""]})}),Object(X.jsx)(de.a,{md:3,children:Object(X.jsxs)(m.a,{children:[Object(X.jsx)(x.a,{for:"device",style:{color:"#014d88",fontWeight:"bold",fontSize:"14px"},children:"Select Finger"}),Object(X.jsxs)(me.a,{type:"select",name:"templateType",id:"templateType",onChange:Me,value:y.templateType,required:!0,children:[Object(X.jsx)("option",{value:"",children:"Select Finger "}),w&&Q.a.filter(w,["captured",!1]).map((function(e){return Object(X.jsx)("option",{value:e.display,children:e.display},e.id)}))]}),""!==ee.templateType?Object(X.jsx)("span",{className:t.error,children:ee.templateType}):""]})}),Be?Object(X.jsx)(de.a,{md:4,children:Object(X.jsxs)(m.a,{children:[Object(X.jsxs)(x.a,{for:"device",style:{color:"#014d88",fontWeight:"bold",fontSize:"14px"},children:[" ","Reason for capture"," "]}),Object(X.jsx)(me.a,{type:"textarea",name:"reason",id:"reason",onChange:Me})]})}):"",Object(X.jsx)(de.a,{md:2,children:D?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",className:"mt-4",style:{backgroundColor:"#992E62"},startIcon:Object(X.jsx)(Ne.a,{}),children:"Capturing..."})}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",onClick:function(t){t.preventDefault(),function(){var e=Object(s.a)({},ee);return e.templateType=y.templateType?"":"This field is required",te(Object(s.a)({},e)),Object.values(e).every((function(e){return""===e}))}()&&(z(!0),O.a.post("".concat(B.url,"?reader=").concat(B.name,"&isNew=").concat(Pe,"&recapture=",!0),y,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){if(z(!1),"ERROR"===t.data.type)z(!1),V(!0),window.setTimeout((function(){V(!1)}),5e3),M.b.error(t.data.message.ERROR),De(!1);else if("WARNING"===t.data.type){t.data.imageQuality<=60&&ze(e.age)<=6&&(M.b.info("Image quality captured is poor, Kindly give a reason for capture above.",{position:M.b.POSITION.BOTTOM_CENTER,autoClose:2e4}),Te(!0));var a=t.data.templateType;V(!1),J(!0);var c=t.data;c.capturedBiometricsList=Q.a.uniqBy(c.capturedBiometricsList,"templateType"),se([].concat(Object(je.a)(oe),[c])),Q.a.find(w,{display:a}).captured=!0,k(Object(je.a)(w)),v(Object(s.a)(Object(s.a)({},y),{},{templateType:""})),De(!1),M.b.warning(t.data.message.WARNING)}else if("SUCCESS"===t.data.type){t.data.imageQuality<=60&&ze(e.age)<=6&&(M.b.info("Image quality captured is poor, Kindly give a reason for capture above.",{position:M.b.POSITION.BOTTOM_CENTER,autoClose:2e4}),Te(!0));var n=t.data.templateType;V(!1),J(!0);var r=t.data;r.capturedBiometricsList=Q.a.uniqBy(r.capturedBiometricsList,"templateType"),se([].concat(Object(je.a)(oe),[r])),Q.a.find(w,{display:n}).captured=!0,k(Object(je.a)(w)),v(Object(s.a)(Object(s.a)({},y),{},{templateType:""})),De(!1)}else z(!1),V(!0),M.b.error("Something went wrong capturing biometrics...",{position:M.b.POSITION.BOTTOM_CENTER})})).catch((function(e){z(!1)})))},className:"mt-4",style:{backgroundColor:"#992E62"},startIcon:Object(X.jsx)(ge.a,{}),disabled:D,children:"Capture Finger"})})}),Object(X.jsx)("br",{}),Object(X.jsx)(de.a,{md:12,children:D?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("b",{children:"Capturing finger..."}),Object(X.jsx)(jt.a,{})]}):""})]})}):"",Object(X.jsxs)(le.a,{children:[console.log(oe),oe.length>=1?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(de.a,{md:12,style:{marginTop:"10px",paddingBottom:"20px"},children:Object(X.jsx)(ye.a,{celled:!0,horizontal:!0,children:oe.map((function(e){return Object(X.jsxs)(ye.a.Item,{style:{width:"200px",height:"200px",border:"1px dotted #014d88",margin:"5px"},children:[Object(X.jsxs)(ye.a.Header,{style:{paddingLeft:"0px",height:"0.5rem",alignItems:"right"},children:[We(e.mainImageQuality),Object(X.jsxs)("span",{onClick:function(){_e(e)},children:[Object(X.jsx)(He.a,{name:"cancel",color:"red",style:{float:"right"}})," "]})]}),Object(X.jsxs)(ye.a.Content,{style:{width:"200px",height:"150px",display:"flex",justifyContent:"center",alignItems:"center"},children:[" ",Object(X.jsx)(ge.a,{style:{color:"#992E62",fontSize:150}})]}),Object(X.jsx)(ye.a.Content,{style:{width:"200px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"16px",color:"#014d88",fontWeight:"bold",fontFamily:'"poppins", sans-serif'},children:e.templateType}),Object(X.jsxs)(ye.a.Content,{children:[Object(X.jsx)("br",{}),e.mainImageQuality<75?Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){_e(e)},startIcon:Object(X.jsx)(qe.a,{}),children:"Reset recapture"}):" "]})]})}))})}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsxs)(de.a,{md:12,children:[Object(X.jsx)("br",{}),Object(X.jsx)(h.a,{type:"button",variant:"contained",color:"primary",disabled:oe.length<6,onClick:function(t){if(t.preventDefault(),oe.length>=1){var a=oe[oe.length-1];a.capturedBiometricsList=Q.a.uniqBy(a.capturedBiometricsList,"templateType"),O.a.post("".concat(Y,"biometrics/templates"),a,{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){M.b.success("Biometric recaptured successfully",{position:M.b.POSITION.BOTTOM_CENTER}),se([]),Ee(),e.getRecaptureCount(),e.toggle()})).catch((function(e){M.b.error("Something went wrong saving biometrics",{position:M.b.POSITION.BOTTOM_CENTER}),console.log(e.message)}))}else M.b.error("You can't save less than 2 finger",{position:M.b.POSITION.BOTTOM_CENTER})},startIcon:Object(X.jsx)(P.a,{}),children:"Save Capture"})]}),Object(X.jsx)("br",{})]}):""]})]})})})]})})},kt=a(687),Ct=a.n(kt),It=a(128),Bt=a.n(It),Tt=a(138),Rt=a.n(Tt),At=a(129),Pt=a.n(At),Dt=a(136),zt=a.n(Dt),Et=a(73),Ft=a.n(Et),Mt=a(72),_t=a.n(Mt),Wt=a(130),Lt=a.n(Wt),Ht=a(131),Yt=a.n(Ht),qt=a(133),Gt=a.n(qt),Vt=a(134),Qt=a.n(Vt),Ut=a(135),Kt=a.n(Ut),Xt=a(139),Jt=a.n(Xt),Zt=a(132),$t=a.n(Zt),ea=a(137),ta=a.n(ea),aa=a(140),ca=a.n(aa),na={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},ra=function(e){var t=e.patientObj.createdDate.split("T")[0],a=(new Date).toISOString().split("T")[0],n=Object(c.useState)([]),r=Object(d.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(!1),l=Object(d.a)(s,2),j=l[0],b=l[1],u=Object(c.useState)(!1),p=Object(d.a)(u,2),f=p[0],m=p[1],x=function(){return b(!j)},g=function(){return m(!f)},y=Object(c.useRef)(null),v=Object(c.useState)(""),N=Object(d.a)(v,2),S=N[0],w=(N[1],Object(c.useState)([])),k=Object(d.a)(w,2),C=(k[0],k[1],Object(c.useState)([])),I=Object(d.a)(C,2),B=I[0],T=I[1],R=Object(c.useState)(1),A=Object(d.a)(R,2),P=(A[0],A[1]),D=function(){O.a.get("".concat(Y,"biometrics/grouped/person/").concat(e.patientId),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){o(e.data)}))};Object(c.useEffect)((function(){D()}),[]);return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("h4",{children:[" ","Patient recapture count : ",Object(X.jsx)("b",{children:i.length-1})]}),t!==a?Object(X.jsx)(h.a,{className:" float-right mr-1",variant:"contained",floated:"left",startIcon:Object(X.jsx)(Ct.a,{}),style:{backgroundColor:"#014d88",color:"#fff",height:"35px",float:"right"},onClick:g,children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Recapture"})}):"",Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)(Ee.a,{tableRef:y,icons:na,title:"Biometrics List",columns:[{title:"Captured Date",field:"captureDate",filtering:!1},{title:"Number of Fingers Captured",field:"count",filtering:!1},{title:"Category",field:"data"},{title:"Number",field:"number"},{title:"Actions",field:"actions",filtering:!1}],isLoading:S,data:i&&i.filter((function(e){return 0===e.archived})).map((function(e,t){return{captureDate:e.captureDate,count:null===e.count?0:e.count,data:1===e.recapture?"Recapture":"Baseline",number:t+1,actions:Object(X.jsx)(h.a,{style:{backgroundColor:"#014d88",color:"#fff"},onClick:function(){return function(e){O.a.get("".concat(Y,"biometrics?personUuid=").concat(e.personUuid,"&recapture=").concat(e.recapture),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(t){x();var a=t.data.filter((function(t){return t.date===e.captureDate}));T(a)}))}(e)},children:"View"})}})),options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){P(e+1)}}),Object(X.jsx)(Nt,{storedBiometrics:B,modal:j,toggle:x}),Object(X.jsx)(wt,{toggle:g,modal:f,patientId:e.patientId,age:e.age,getRecaptureCount:D})]})},ia=Object(B.a)((function(e){return{root:{width:"100%",marginBottom:20,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},checkinModal:{"& .modal-dialog":{maxWidth:"1000px"},"& .ui.label":{backgroundColor:"#fff",fontSize:"16px",color:"#014d88",fontWeight:"bold",textAlign:"left"},"& .card-title":{color:"#fff",fontWeight:"bold"},"& .form-control":{borderRadius:"0.25rem",height:"41px"},"& .card-header:first-child":{borderRadius:"calc(0.25rem - 1px) calc(0.25rem - 1px) 0 0"},"& .dropdown-toggle::after":{display:" block !important"},"& select":{"-webkit-appearance":"listbox !important"},"& p":{color:"red"},"& label":{fontSize:"14px",color:"#014d88",fontWeight:"bold"}},checkInDatePicker:{"& .MuiFormControl-root.MuiTextField-root":{border:"1px solid #eee"}}}}));var oa=function(e){e.location&&e.location.state&&e.location.state.user;var t=Object(c.useState)(""),a=Object(d.a)(t,2),n=(a[0],a[1],Object(o.g)()),r=ia(),i=n.location&&n.location.state?n.location.state.patientObj:{},s=n.location&&n.location.state?n.location.state.permissions:[],l=Object(c.useState)(i.biometricStatus),j=Object(d.a)(l,2),b=(j[0],j[1]),u=Object(c.useState)(!1),p=Object(d.a)(u,2),f=(p[0],p[1]),m=Object(c.useState)([]),x=Object(d.a)(m,2),g=(x[0],x[1],Object(c.useState)(!1)),y=Object(d.a)(g,2),v=(y[0],y[1],function(e){b(e)}),N=[{menuItem:"Recapture Biometrics",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)("div",{style:{minHeight:400,width:"100%"},children:Object(X.jsx)(ra,{patientObj:i,age:i.dateOfBirth,patientId:i.id,updatePatientBiometricStatus:v})})})}}];return Object(c.useEffect)((function(){O.a.get("".concat(Y,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){!0===e.data&&f(!0)})).catch((function(e){}))}),[]),Object(X.jsxs)("div",{className:r.root,children:[Object(X.jsx)("div",{className:"mb-6 col-md-6",style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(X.jsxs)(U.a,{"aria-label":"breadcrumb",children:[Object(X.jsx)(K.a,{style:{color:"#992E62"},children:"Patient"}),Object(X.jsx)(K.a,{style:{color:"#014d88"},children:"Dashboard"})]})}),Object(X.jsx)(Be.a,{children:Object(X.jsxs)(Te.a,{children:[Object(X.jsx)(dt,{patientObj:i,permissions:s,patientBiometricStatus:i.biometricStatus}),Object(X.jsxs)(Be.a,{style:{marginTop:"5px"},children:[Object(X.jsx)("div",{children:Object(X.jsx)(_.a,{to:"/",children:Object(X.jsx)(h.a,{className:" float-right mr-1",variant:"contained",floated:"left",startIcon:Object(X.jsx)(W.a,{}),style:{backgroundColor:"rgb(153, 46, 98)",color:"#fff",height:"35px"},children:Object(X.jsx)("span",{style:{textTransform:"capitalize"},children:"Back"})})})}),Object(X.jsx)(Te.a,{children:Object(X.jsx)(Se.a,{panes:N})})]})]})})]})},sa=(a(940),a(688),a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a(1072),a(1073),a(92)),la=(a(506),a(503),a(504),a(1095)),da=a(1080),ja={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},ba=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}})),ua=function(e){localStorage.setItem("menu",JSON.stringify(0));var t=Object(c.useRef)(null),a=ba(),n=Object(c.useState)([]),r=Object(d.a)(n,2),i=(r[0],r[1],Object(c.useState)(e.permissions)),l=Object(d.a)(i,2),j=l[0],b=(l[1],Object(c.useState)("")),u=Object(d.a)(b,2),p=u[0],f=(u[1],Object(c.useState)(!1)),m=Object(d.a)(f,2),x=m[0],g=m[1],y=Object(c.useState)(!1),v=Object(d.a)(y,2),N=v[0],S=(v[1],Object(c.useState)(!0)),w=Object(d.a)(S,2),k=w[0],C=w[1],I=Object(c.useState)("*"),B=Object(d.a)(I,2),T=(B[0],B[1],Object(c.useState)(0)),R=Object(d.a)(T,2),A=(R[0],R[1],Object(c.useState)(0)),P=Object(d.a)(A,2),D=(P[0],P[1],Object(c.useState)(0)),z=Object(d.a)(D,2),E=(z[0],z[1],Object(c.useState)(10)),F=Object(d.a)(E,2),_=(F[0],F[1],Object(c.useState)(1)),W=Object(d.a)(_,2),L=W[0],q=W[1],G=Object(o.g)();function V(e){return[{name:"View",type:"link",icon:Object(X.jsx)(ft.b,{size:"22"}),to:{pathname:"/view-patient",state:{patientId:e.id,permissions:j}}},Object(s.a)({},j.includes("view_patient")||j.includes("all_permission")&&{name:"Dashboard",type:"link",icon:Object(X.jsx)(sa.d,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/patient-dashboard",state:{patientObj:e,permissions:j}}}),Object(s.a)({},j.includes("edit_patient")||j.includes("all_permission")&&{name:"Edit",type:"link",icon:Object(X.jsx)(sa.c,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/register-patient",state:{patientId:e.id,permissions:j}}}),Object(s.a)({},j.includes("delete_patient")||j.includes("all_permission")&&{name:"Delete",type:"link",icon:Object(X.jsx)(sa.a,{size:"20",color:"rgb(4, 196, 217)"}),deleteAction:function(){var t;t=e.id,localStorage.setItem("patientID",JSON.stringify(t)),g(!x)},to:{pathname:"/#",state:{patientObj:e,permissions:j}}})]}var Q=function(){g(!1)},U=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return c<=0&&n<0&&t.getDate()<a.getDate()&&c--,0===c?n+" month(s)":c+" year(s)"},K=function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""},J=function(){C(!k)},Z=function(){return Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(we.a,{className:" float-right mr-1",children:Object(X.jsx)(la.a,{control:Object(X.jsx)(da.a,{onChange:J,checked:!k,style:{color:"#014d88",fontWeight:"bold"}}),label:"Show PII",style:{color:"#014d88",fontWeight:"bolder"}})}):Object(X.jsx)("h5",{style:{color:"#3d4465",fontWeight:"bold"},children:"Patients"})})};"".concat(L," - 10 of 2022");return Object(X.jsxs)("div",{className:a.root,children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(X.jsx)(Ee.a,{tableRef:t,icons:ja,title:Object(X.jsx)(Z,{}),columns:[{title:"Name",field:"name",filtering:!1,hidden:k},{title:"Hosp. Number",field:"id",filtering:!1},{title:"Sex",field:"sex",filtering:!1},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:p,data:function(e){return new Promise((function(t,a){O.a.get("".concat(Y,"patient?pageSize=").concat(e.pageSize,"&pageNo=").concat(e.page,"&searchParam=").concat(e.search),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){return e})).then((function(a){""===a.data?t({data:[],page:0,totalCount:0}):t({data:a.data.records.map((function(e){return{name:[e.firstName,e.otherName,e.surname].filter(Boolean).join(", "),id:K(e.identifier),sex:e.sex.toLowerCase().charAt(0).toUpperCase()+e.sex.slice(1).toLowerCase(),dateOfBirth:e.dateOfBirth,age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:U(e.dateOfBirth),actions:Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(gt,{actions:V(e)}):""})}})),page:e.page,totalCount:a.data.totalRecords})}))}))},options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){q(e+1)}}),Object(X.jsxs)(pe.a,{isOpen:x,toggle:Q,children:[Object(X.jsx)(he.a,{toggle:Q,children:"Delete Patient"}),Object(X.jsxs)(fe.a,{children:["Are you sure you want to delete this record?"," ",N?N.surname+", "+N.firstname+" "+N.otherName:""]}),Object(X.jsxs)(yt.a,{children:[Object(X.jsx)(h.a,{color:"primary",type:"button",onClick:function(){var e=localStorage.getItem("patientID");O.a.delete("".concat(Y,"patient/").concat(e),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){localStorage.removeItem("patientID"),Ce.a.fire({icon:"success",text:"Patient Deleted Successfully",timer:1500}),g(!1),G.push("/")})).catch((function(e){Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred while deleting!!!"})}))},children:"Yes"})," ",Object(X.jsx)(h.a,{color:"secondary",type:"button",onClick:function(e){return Q()},children:"No"})]})]})]})},Oa={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},pa=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}}));var ha=function(e){pa();var t=Object(c.useState)([]),a=Object(d.a)(t,2),n=(a[0],a[1]),r=Object(c.useState)(e.permissions),i=Object(d.a)(r,2),o=i[0],j=i[1],u=Object(c.useState)(""),p=Object(d.a)(u,2),h=p[0],f=(p[1],Object(c.useState)(!1)),m=Object(d.a)(f,2),x=(m[0],m[1],Object(c.useState)(!0)),g=Object(d.a)(x,2),y=g[0],v=g[1],N=Object(c.useState)(1),S=Object(d.a)(N,2),w=S[0],k=S[1],C=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"patient/getall-patients-without-biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){e.data&&n(e.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[]);function I(e){return[Object(s.a)({},o.includes("view_patient")||o.includes("all_permission")&&{name:"Capture",type:"link",icon:Object(X.jsx)(sa.b,{size:"22"}),to:{pathname:"/patient-dashboard",state:{patientObj:e,permissions:o}}})]}Object(c.useEffect)((function(){O.a.get("".concat(Y,"account"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){j(e.data.permissions)})).catch((function(e){})),C()}),[]);var B=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"},T=function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""},R=function(){v(!y)},A=function(){return Object(X.jsx)("div",{children:o.includes("view_patient")||o.includes("all_permission")?Object(X.jsx)(we.a,{className:" float-right mr-1",children:Object(X.jsx)(la.a,{control:Object(X.jsx)(da.a,{onChange:R,checked:!y,style:{color:"#014d88",fontWeight:"bold"}}),label:"Show PII",style:{color:"#014d88",fontWeight:"bolder"}})}):Object(X.jsx)("h5",{style:{color:"#3d4465",fontWeight:"bold"},children:"Patients"})})};return"Page: ".concat(w),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:"Patients without biometrics"}),Object(X.jsx)(Ee.a,{icons:Oa,title:Object(X.jsx)(A,{}),columns:[{title:"Name",field:"name",filtering:!1,hidden:y},{title:"Hosp. Number",field:"id",filtering:!1},{title:"Sex",field:"sex",filtering:!1},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:h,data:function(e){return new Promise((function(t,a){O.a.get("".concat(Y,"patient/getall-patients-without-biometric?pageSize=").concat(e.pageSize,"&pageNo=").concat(e.page,"&searchParam=").concat(e.search),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){return e})).then((function(a){t({data:a.data.records.map((function(e){return{name:[e.firstName,e.otherName,e.surname].filter(Boolean).join(", "),id:T(e.identifier),sex:e.sex.toLowerCase().charAt(0).toUpperCase()+e.sex.slice(1).toLowerCase(),dateOfBirth:e.dateOfBirth,age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:B(e.dateOfBirth),actions:Object(X.jsx)("div",{children:o.includes("view_patient")||o.includes("all_permission")?Object(X.jsx)(gt,{actions:I(e)}):""})}})),page:e.page,totalCount:a.data.totalRecords})}))}))},options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){k(e+1)}})]})},fa={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},ma=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}}));var xa=function(e){ma();var t=Object(c.useState)([]),a=Object(d.a)(t,2),n=(a[0],a[1]),r=Object(c.useState)(e.permissions),i=Object(d.a)(r,2),o=i[0],j=i[1],u=Object(c.useState)(""),p=Object(d.a)(u,2),h=p[0],f=(p[1],Object(c.useState)(!1)),m=Object(d.a)(f,2),x=(m[0],m[1],Object(c.useState)(!0)),g=Object(d.a)(x,2),y=g[0],v=g[1],N=Object(c.useState)(1),S=Object(d.a)(N,2),w=S[0],k=S[1],C=Object(c.useCallback)(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(Y,"patient/getall-patients-with-no-biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){e.data&&n(e.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[]);function I(e){return[Object(s.a)({},o.includes("view_patient")||o.includes("all_permission")&&{name:"Capture",type:"link",icon:Object(X.jsx)(sa.b,{size:"22"}),to:{pathname:"/patient-dashboard",state:{patientObj:e,permissions:o}}})]}Object(c.useEffect)((function(){O.a.get("".concat(Y,"account"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){j(e.data.permissions)})).catch((function(e){})),C()}),[]);var B=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"},T=function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""},R=function(){v(!y)},A=function(){return Object(X.jsx)("div",{children:o.includes("view_patient")||o.includes("all_permission")?Object(X.jsx)(we.a,{className:" float-right mr-1",children:Object(X.jsx)(la.a,{control:Object(X.jsx)(da.a,{onChange:R,checked:!y,style:{color:"#014d88",fontWeight:"bold"}}),label:"Show PII",style:{color:"#014d88",fontWeight:"bolder"}})}):Object(X.jsx)("h5",{style:{color:"#3d4465",fontWeight:"bold"},children:"Patients"})})};return"Page: ".concat(w),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:"Patients not captured"}),Object(X.jsx)(Ee.a,{icons:fa,title:Object(X.jsx)(A,{}),columns:[{title:"Name",field:"name",filtering:!1,hidden:y},{title:"Hosp. Number",field:"id",filtering:!1},{title:"Sex",field:"sex",filtering:!1},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:h,data:function(e){return new Promise((function(t,a){O.a.get("".concat(Y,"patient/getall-patients-with-no-biometric?pageSize=").concat(e.pageSize,"&pageNo=").concat(e.page,"&searchParam=").concat(e.search),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){return e})).then((function(a){t({data:a.data.records.map((function(e){return{name:[e.firstName,e.otherName,e.surname].filter(Boolean).join(", "),id:T(e.identifier),sex:e.sex.toLowerCase().charAt(0).toUpperCase()+e.sex.slice(1).toLowerCase(),dateOfBirth:e.dateOfBirth,age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:B(e.dateOfBirth),actions:Object(X.jsx)("div",{children:Object(X.jsx)(gt,{actions:I(e)})})}})),page:e.page,totalCount:a.data.totalRecords})}))}))},options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){k(e+1)}})]})},ga={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},ya=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}})),va=function(e){var t=Object(c.useRef)(null),a=ya(),n=Object(c.useState)([]),r=Object(d.a)(n,2),i=(r[0],r[1],Object(c.useState)(e.permissions)),o=Object(d.a)(i,2),j=o[0],u=(o[1],Object(c.useState)("")),p=Object(d.a)(u,2),f=p[0],m=(p[1],Object(c.useState)(!1)),x=Object(d.a)(m,2),g=x[0],y=x[1],v=Object(c.useState)(!1),N=Object(d.a)(v,2),S=N[0],w=(N[1],Object(c.useState)(!0)),k=Object(d.a)(w,2),C=k[0],I=k[1],B=Object(c.useState)("*"),T=Object(d.a)(B,2),R=(T[0],T[1],Object(c.useState)(0)),A=Object(d.a)(R,2),P=(A[0],A[1],Object(c.useState)(0)),D=Object(d.a)(P,2),z=(D[0],D[1],Object(c.useState)(0)),E=Object(d.a)(z,2),F=(E[0],E[1],Object(c.useState)(10)),_=Object(d.a)(F,2),W=(_[0],_[1],Object(c.useState)(1)),L=Object(d.a)(W,2),q=L[0],G=L[1],V=Object(c.useState)(1),Q=Object(d.a)(V,2),U=Q[0],K=Q[1];function J(e){return[{name:"View",type:"link",icon:Object(X.jsx)(ft.b,{size:"22"}),to:{pathname:"/patient-biometrics",state:{patientObj:e,permissions:j}}},Object(s.a)({},j.includes("view_patient")||j.includes("all_permission")&&{name:"Dashboard",type:"link",icon:Object(X.jsx)(sa.d,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/patient-biometrics",state:{patientObj:e,permissions:j}}})]}var Z=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,O.a.delete("".concat(Y,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 4:e.sent,window.location.reload();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){y(!1)},ee=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"},te=function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""},ae=function(){I(!C)},ce=function(){return Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(we.a,{className:" float-right mr-1",children:Object(X.jsx)(la.a,{control:Object(X.jsx)(da.a,{onChange:ae,checked:!C,style:{color:"#014d88",fontWeight:"bold"}}),label:"Show PII",style:{color:"#014d88",fontWeight:"bolder"}})}):Object(X.jsx)("h5",{style:{color:"#3d4465",fontWeight:"bold"},children:"Patients"})})};"".concat(q," - 10 of 2022");return Object(X.jsxs)("div",{className:a.root,children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(X.jsxs)(De.a,{id:"biometrics",select:!0,label:"Select",defaultValue:"1",helperText:"Select patient biometric status",onChange:function(e){return function(e){var t=e.target.value;K("1"===t?1:"2"===t?2:"3"===t?3:1)}(e)},children:[Object(X.jsx)(Ie.a,{value:"1",children:"With Biometrics"},"1"),Object(X.jsx)(Ie.a,{value:"2",children:"Incomplete Biometrics"},"2"),Object(X.jsx)(Ie.a,{value:"3",children:"No Biometrics Captured"},"3")]}),1===U?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("h3",{children:"Patients with biometrics"}),Object(X.jsx)(Ee.a,{tableRef:t,icons:ga,title:Object(X.jsx)(ce,{}),columns:[{title:"Name",field:"name",filtering:!1,hidden:C},{title:"Hosp. Number",field:"id",filtering:!1},{title:"Sex",field:"sex",filtering:!1},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:f,data:function(e){return new Promise((function(t,a){O.a.get("".concat(Y,"patient/getall-patients-with-biometric?pageSize=").concat(e.pageSize,"&pageNo=").concat(e.page,"&searchParam=").concat(e.search),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){return e})).then((function(a){t({data:a.data.records.map((function(e){return{name:[e.firstName,e.otherName,e.surname].filter(Boolean).join(", "),id:te(e.identifier),sex:e.sex.toLowerCase().charAt(0).toUpperCase()+e.sex.slice(1).toLowerCase(),dateOfBirth:e.dateOfBirth,age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:ee(e.dateOfBirth),actions:Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(gt,{actions:J(e)}):""})}})),page:e.page,totalCount:a.data.totalRecords})}))}))},options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){G(e+1)}})]}):2===U?Object(X.jsx)(ha,{permissions:e.permissions}):3===U?Object(X.jsx)(xa,{permissions:e.permissions}):"",Object(X.jsxs)(pe.a,{isOpen:g,toggle:$,children:[Object(X.jsx)(he.a,{toggle:$,children:"Delete Patient"}),Object(X.jsxs)(fe.a,{children:["Are you sure to delete this record?"," ",S?S.surname+", "+S.firstname+" "+S.otherName:""]}),Object(X.jsxs)(yt.a,{children:[Object(X.jsx)(h.a,{color:"primary",type:"button",onClick:function(e){return Z(S.id)},children:"Yes"})," ",Object(X.jsx)(h.a,{color:"secondary",type:"button",onClick:function(e){return $()},children:"No"})]})]})]})},Na={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},Sa=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}})),wa=function(e){var t=Object(c.useRef)(null),a=Sa(),n=Object(c.useState)([]),r=Object(d.a)(n,2),i=(r[0],r[1],Object(c.useState)(e.permissions)),o=Object(d.a)(i,2),j=o[0],u=(o[1],Object(c.useState)("")),p=Object(d.a)(u,2),f=p[0],m=(p[1],Object(c.useState)(!1)),x=Object(d.a)(m,2),g=x[0],y=x[1],v=Object(c.useState)(!1),N=Object(d.a)(v,2),S=N[0],w=(N[1],Object(c.useState)(!0)),k=Object(d.a)(w,2),C=k[0],I=k[1],B=Object(c.useState)("*"),T=Object(d.a)(B,2),R=(T[0],T[1],Object(c.useState)(0)),A=Object(d.a)(R,2),P=(A[0],A[1],Object(c.useState)(0)),D=Object(d.a)(P,2),z=(D[0],D[1],Object(c.useState)(0)),E=Object(d.a)(z,2),F=(E[0],E[1],Object(c.useState)(10)),_=Object(d.a)(F,2),W=(_[0],_[1],Object(c.useState)(1)),L=Object(d.a)(W,2),q=L[0],G=L[1];function V(e){return[{name:"View",type:"link",icon:Object(X.jsx)(ft.b,{size:"22"}),to:{pathname:"/register-patient",state:{patientId:e.id,permissions:j}}},Object(s.a)({},j.includes("view_patient")||j.includes("all_permission")&&{name:"Dashboard",type:"link",icon:Object(X.jsx)(sa.d,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/patient-dashboard",state:{patientObj:e,permissions:j}}}),Object(s.a)({},j.includes("edit_patient")||j.includes("all_permission")&&{name:"Edit",type:"link",icon:Object(X.jsx)(sa.c,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/register-patient",state:{patientId:e.id,permissions:j}}}),Object(s.a)({},j.includes("delete_patient")||j.includes("all_permission")&&{name:"Delete",type:"link",icon:Object(X.jsx)(sa.a,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/#",state:{patientObj:e,permissions:j}}})]}var Q=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,O.a.delete("".concat(Y,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 4:e.sent,window.location.reload();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){y(!1)},K=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"},J=function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""},Z=function(){I(!C)},$=function(){return Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(we.a,{className:" float-right mr-1",children:Object(X.jsx)(la.a,{control:Object(X.jsx)(da.a,{onChange:Z,checked:!C,style:{color:"#014d88",fontWeight:"bold"}}),label:"Show PII",style:{color:"#014d88",fontWeight:"bolder"}})}):Object(X.jsx)("h5",{style:{color:"#3d4465",fontWeight:"bold"},children:"Patients"})})};"Page: ".concat(q);return Object(X.jsxs)("div",{className:a.root,children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(X.jsx)(Ee.a,{tableRef:t,icons:Na,title:Object(X.jsx)($,{}),columns:[{title:"Name",field:"name",filtering:!1,hidden:C},{title:"Hosp. Number",field:"id",filtering:!1},{title:"Sex",field:"sex",filtering:!1},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:f,data:function(e){return new Promise((function(t,a){O.a.get("".concat(Y,"patient/checked-in?pageSize=").concat(e.pageSize,"&pageNo=").concat(e.page,"&searchParam=").concat(e.search),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){return e})).then((function(a){t({data:a.data.records.map((function(e){return{name:[e.firstName,e.otherName,e.surname].filter(Boolean).join(", "),id:J(e.identifier),sex:e.sex.toLowerCase().charAt(0).toUpperCase()+e.sex.slice(1).toLowerCase(),dateOfBirth:e.dateOfBirth,age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:K(e.dateOfBirth),actions:Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(gt,{actions:V(e)}):""})}})),page:e.page,totalCount:a.data.totalRecords})}))}))},options:{headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){G(e+1)}}),Object(X.jsxs)(pe.a,{isOpen:g,toggle:U,children:[Object(X.jsx)(he.a,{toggle:U,children:"Delete Patient"}),Object(X.jsxs)(fe.a,{children:["Are you sure to delete this record? ",S?S.surname+", "+S.firstname+" "+S.otherName:""]}),Object(X.jsxs)(yt.a,{children:[Object(X.jsx)(h.a,{color:"primary",type:"button",onClick:function(e){return Q(S.id)},children:"Yes"})," ",Object(X.jsx)(h.a,{color:"secondary",type:"button",onClick:function(e){return U()},children:"No"})]})]})]})},ka={Add:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Bt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Pt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Lt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Yt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(X.jsx)($t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Gt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Qt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Kt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Ft.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(zt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(_t.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ta.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Rt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(Jt.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(X.jsx)(ca.a,Object(s.a)(Object(s.a)({},e),{},{ref:t}))}))},Ca=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}}));var Ia=function(e){var t=Object(c.useRef)(null),a=Ca(),n=Object(c.useState)([]),r=Object(d.a)(n,2),i=(r[0],r[1],Object(c.useState)(e.permissions)),o=Object(d.a)(i,2),j=o[0],u=(o[1],Object(c.useState)("")),p=Object(d.a)(u,2),f=p[0],m=(p[1],Object(c.useState)(!1)),x=Object(d.a)(m,2),g=x[0],y=x[1],v=Object(c.useState)(!1),N=Object(d.a)(v,2),S=N[0],w=(N[1],Object(c.useState)(!0)),k=Object(d.a)(w,2),C=k[0],I=k[1],B=Object(c.useState)("*"),T=Object(d.a)(B,2),R=(T[0],T[1],Object(c.useState)(0)),A=Object(d.a)(R,2),P=(A[0],A[1],Object(c.useState)(0)),D=Object(d.a)(P,2),z=(D[0],D[1],Object(c.useState)(0)),E=Object(d.a)(z,2),F=(E[0],E[1],Object(c.useState)(10)),_=Object(d.a)(F,2),W=(_[0],_[1],Object(c.useState)(1)),L=Object(d.a)(W,2),q=L[0],G=L[1];function V(e){return[{name:"View",type:"link",icon:Object(X.jsx)(ft.b,{size:"22"}),to:{pathname:"/register-patient",state:{patientId:e.id,permissions:j}}},Object(s.a)({},j.includes("edit_patient")||j.includes("all_permission")&&{name:"Edit",type:"link",icon:Object(X.jsx)(sa.c,{size:"20",color:"rgb(4, 196, 217)"}),to:{pathname:"/register-patient",state:{patientId:e.id,permissions:j}}}),Object(s.a)({},j.includes("delete_patient")||j.includes("all_permission")&&{name:"Delete",type:"link",icon:Object(X.jsx)(sa.a,{size:"20",color:"rgb(4, 196, 217)"}),deleteAction:function(){var t;t=e.id,O.a.delete("".concat(Y,"patient/delete/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){Ce.a.fire({icon:"success",text:"DQA Deleted Successfully",timer:1500})})).catch((function(e){Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred while deleting!!!"})}))},to:{pathname:"/#",state:{patientObj:e,permissions:j}}})]}var Q=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,O.a.delete("".concat(Y,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 4:e.sent,window.location.reload();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){y(!1)},K=function(e){var t=new Date,a=(e.split("-"),new Date(e)),c=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&c--,0===c?n+" month(s)":c+" year(s)"},J=function(e){var t=e.identifier.find((function(e){return"HospitalNumber"==e.type}));return t?t.value:""},Z=function(){I(!C)},$=function(){return Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(we.a,{className:" float-right mr-1",children:Object(X.jsx)(la.a,{control:Object(X.jsx)(da.a,{onChange:Z,checked:!C,style:{color:"#014d88",fontWeight:"bold"}}),label:"Show PII",style:{color:"#014d88",fontWeight:"bolder"}})}):Object(X.jsx)("h5",{style:{color:"#3d4465",fontWeight:"bold"},children:"Patients"})})};return"Page: ".concat(q),Object(X.jsxs)("div",{className:a.root,children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),Object(X.jsx)(Ee.a,{tableRef:t,icons:ka,title:Object(X.jsx)($,{}),columns:[{title:"Name",field:"name",filtering:!1,hidden:C},{title:"Hosp. Number",field:"id",filtering:!1},{title:"Sex",field:"sex",filtering:!1},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Status",field:"status",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:f,data:function(e){return new Promise((function(t,a){O.a.get("".concat(Y,"patient/get-duplicate-hospital_numbers?pageSize=").concat(e.pageSize,"&pageNo=").concat(e.page,"&searchParam=").concat(e.search),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){return e})).then((function(a){""===a.data?t({data:[],page:0,totalCount:0}):t({data:a.data.records.map((function(e){return{name:[e.firstName,e.otherName,e.surname].filter(Boolean).join(", "),id:J(e.identifier),sex:e.sex,dateOfBirth:e.dateOfBirth,status:1==e.archived?"Archived":"Active",age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:K(e.dateOfBirth),actions:Object(X.jsx)("div",{children:j.includes("view_patient")||j.includes("all_permission")?Object(X.jsx)(gt,{actions:V(e)}):""})}})),page:e.page,totalCount:a.data.totalRecords})}))}))},options:{rowStyle:function(e){return"Archived"===e.status?{backgroundColor:"#ceeef5",border:"2px solid #fff"}:{border:"2px solid #eee"}},headerStyle:{backgroundColor:"#014d88",color:"#fff",fontSize:"16px",padding:"10px",fontWeight:"bolder"},searchFieldStyle:{width:"50%"},filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400},onChangePage:function(e){G(e+1)}}),Object(X.jsxs)(pe.a,{isOpen:g,toggle:U,children:[Object(X.jsx)(he.a,{toggle:U,children:"Delete Patient"}),Object(X.jsxs)(fe.a,{children:["Are you sure to delete this record? ",S?S.surname+", "+S.firstname+" "+S.otherName:""]}),Object(X.jsxs)(yt.a,{children:[Object(X.jsx)(h.a,{color:"primary",type:"button",onClick:function(e){return Q(S.id)},children:"Yes"})," ",Object(X.jsx)(h.a,{color:"secondary",type:"button",onClick:function(e){return U()},children:"No"})]})]})]})},Ba=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}}));var Ta=function(e){var t=Ba(),a=Object(c.useState)([]),n=Object(d.a)(a,2),r=n[0],i=n[1];Object(c.useEffect)((function(){o()}),[]);var o=function(){O.a.get("".concat(Y,"account"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){i(e.data.permissions)})).catch((function(e){}))},s=[{menuItem:"Duplicate Hospital Numbers",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)(Ia,{permissions:r})})}}];return Object(X.jsxs)("div",{className:t.root,children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),r.includes("view_patient")||r.includes("all_permission")?Object(X.jsx)(Se.a,{panes:s}):""]})},Ra=Object(B.a)((function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)},"& a":{textDecoration:"none !important"}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}}));var Aa=function(e){var t=Ra(),a=Object(c.useState)([]),n=Object(d.a)(a,2),r=(n[0],n[1],Object(c.useState)([])),i=Object(d.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(""),j=Object(d.a)(l,2),b=(j[0],j[1],Object(c.useState)(!1)),u=Object(d.a)(b,2),p=(u[0],u[1],Object(c.useState)(!1)),f=Object(d.a)(p,2),m=(f[0],f[1],Object(c.useState)(!0)),x=Object(d.a)(m,2);x[0],x[1],Object(c.useEffect)((function(){g()}),[]);var g=function(){O.a.get("".concat(Y,"account"),{headers:{Authorization:"Bearer ".concat(H)}}).then((function(e){s(e.data.permissions)})).catch((function(e){}))},y=[{menuItem:"Clients",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)(ua,{permissions:o})})}},{menuItem:"Checked-In",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)(wa,{permissions:o})})}},{menuItem:"Patient Biometrics",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)(va,{permissions:o})})}},{menuItem:"Migration DQA",render:function(){return Object(X.jsx)(Se.a.Pane,{children:Object(X.jsx)(Ta,{permissions:o})})}}];return Object(X.jsxs)("div",{className:t.root,children:[Object(X.jsx)(M.a,{autoClose:3e3,hideProgressBar:!0}),o.length>0&&Object(X.jsx)(ue.a,{children:Object(X.jsxs)(Oe.a,{children:[Object(X.jsxs)("div",{className:"row mb-12 col-md-12",children:[Object(X.jsx)("div",{className:"mb-6 col-md-6",children:Object(X.jsxs)(U.a,{"aria-label":"breadcrumb",children:[Object(X.jsx)(K.a,{style:{color:"#992E62"},children:"Patient"}),Object(X.jsx)(K.a,{style:{color:"#014d88"},children:"Home"})]})}),Object(X.jsx)("div",{className:"mb-6 col-md-6",children:o.includes("view_patient")||o.includes("all_permission")?Object(X.jsx)(_.a,{to:"register-patient",children:Object(X.jsx)(h.a,{variant:"contained",color:"primary",className:" float-right mr-1",startIcon:Object(X.jsx)(ft.c,{size:"25"}),style:{backgroundColor:"#014d88"},children:Object(X.jsx)("span",{style:{textTransform:"capitalize",fontWeight:"bolder"},children:"New Client"})})}):""})]}),Object(X.jsx)(Se.a,{panes:y})]})})]})};function Pa(){return Object(X.jsx)(o.a,{children:Object(X.jsxs)("div",{children:[Object(X.jsx)(M.a,{}),Object(X.jsxs)(o.d,{children:[Object(X.jsx)(o.b,{path:"/patient-biometrics",children:Object(X.jsx)(oa,{})}),Object(X.jsx)(o.b,{path:"/register-patient",children:Object(X.jsx)(za,{})}),Object(X.jsx)(o.b,{path:"/view-patient",children:Object(X.jsx)(ae,{})}),Object(X.jsx)(o.b,{path:"/patient-dashboard",children:Object(X.jsx)(Da,{})}),Object(X.jsx)(o.b,{path:"/patient-vitals",children:Object(X.jsx)(lt,{})}),Object(X.jsx)(o.b,{path:"/add-patient-vital",children:Object(X.jsx)(lt,{})}),Object(X.jsx)(o.b,{path:"/",children:Object(X.jsx)(Aa,{})})]})]})})}function Da(){return Object(X.jsx)(lt,{})}function za(){return Object(X.jsx)($,{})}a(941);i.a.render(Object(X.jsx)(n.a.StrictMode,{children:Object(X.jsx)(Pa,{})}),document.getElementById("root"))}},[[942,1,2]]]);
//# sourceMappingURL=main.d2a845ac.chunk.js.map